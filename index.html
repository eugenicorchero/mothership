<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mothership - Central Command Module</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de Fuentes Retro -->
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        /* Estilos base para el efecto terminal, ajustados a la est√©tica Mothership */
        :root {
            --terminal-color: #00ff66; /* Neon Green */
            --terminal-accent: #ffb86c; /* Amber/Orange for alerts and titles */
            --bg-color: #1a1e24; /* Very Dark Blue/Grey */
            --dark-border: #008833; /* Darker Green for inner borders */
            --error-color: #ff3333; /* Red for errors */
        }
        body {
            font-family: 'VT323', monospace;
            background-color: var(--bg-color);
            color: var(--terminal-color);
            overflow: hidden; 
        }

        /* Estilo general de la aplicaci√≥n */
        #app-container {
            width: 100vw;
            height: 100vh;
            max-width: 100%;
            max-height: 100%;
            padding: 1rem;
            box-sizing: border-box;
            border: 4px solid var(--terminal-color);
            box-shadow: 0 0 15px var(--terminal-color), inset 0 0 10px var(--terminal-color);
            background-color: #000000; /* Fondo negro puro dentro del marco */
        }

        /* Efecto de Flicker (parpadeo sutil) */
        @keyframes flicker {
            0%, 18%, 22%, 25%, 53%, 57%, 100% { opacity: 1; }
            20%, 24%, 55% { opacity: 0.8; }
        }
        .flicker {
            animation: flicker 0.15s infinite alternate;
        }

        /* Efecto Scanlines (l√≠neas de CRT) */
        #app-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                to bottom,
                rgba(0, 0, 0, 0.2) 0px,
                rgba(0, 0, 0, 0.3) 1px,
                transparent 1px,
                transparent 3px
            );
            pointer-events: none;
            opacity: 0.5;
        }
        
        /* Estilo de los enlaces de navegaci√≥n con corchetes (como en las im√°genes) */
        .nav-link {
            padding: 0.5rem 0.75rem;
            margin: 0 0.5rem;
            text-decoration: none;
            color: var(--terminal-color);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            display: inline-block;
        }
        .nav-link:hover {
            color: var(--terminal-accent);
            border-bottom-color: var(--terminal-accent);
        }
        .nav-link.active {
            border-bottom-color: var(--terminal-color);
            color: white; /* Resalta el link activo */
        }

        /* Personalizaci√≥n de botones y enlaces */
        .terminal-btn {
            background-color: transparent;
            border: 2px solid var(--terminal-color);
            color: var(--terminal-color);
            padding: 0.5rem 1.5rem;
            cursor: pointer;
            transition: all 0.1s;
            text-shadow: 0 0 8px var(--terminal-color);
            /* Asegura que el texto est√© centrado si el padding es asim√©trico */
            text-align: center; 
        }

        .terminal-btn:hover {
            background-color: var(--terminal-color);
            color: var(--bg-color);
            box-shadow: 0 0 20px var(--terminal-color);
        }

        /* Estilo para tarjetas (Contratos y Base de Datos) */
        .data-card {
            border: 1px solid var(--dark-border);
            padding: 1rem;
            transition: border-color 0.2s, box-shadow 0.2s;
            cursor: pointer;
            background-color: rgba(0, 0, 0, 0.2);
        }
        .data-card:hover {
            border-color: var(--terminal-color);
            box-shadow: 0 0 10px rgba(0, 255, 102, 0.5);
        }
        
        /* Estilo del input de terminal */
        .terminal-input {
            width: 100%;
            padding: 0.5rem;
            background-color: black;
            border: 1px solid var(--terminal-color);
            color: var(--terminal-accent);
            outline: none;
        }

        /* Estilo espec√≠fico para el bot√≥n de rechazo/error */
        .btn-reject {
            border-color: var(--error-color) !important;
            color: var(--error-color) !important;
            text-shadow: 0 0 8px var(--error-color);
        }
        .btn-reject:hover {
            background-color: var(--error-color) !important;
            color: var(--bg-color) !important;
            box-shadow: 0 0 20px var(--error-color);
        }

        /* Barra de carga animada */
        .loading-bar {
            position: relative;
            background: rgba(0, 0, 0, 0.8);
        }
        .loading-fill {
            background: linear-gradient(90deg, var(--terminal-color), var(--terminal-accent));
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .loading-fill::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* Animaci√≥n de carga por defecto */
        @keyframes loading {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        /* Efectos de escritura tipo terminal */
        .typewriter {
            overflow: hidden;
            white-space: nowrap;
            animation: typewriter 2s steps(40, end), blinkCursor 0.75s step-end infinite;
        }
        @keyframes typewriter {
            0% { width: 0; }
            100% { width: 100%; }
        }
        @keyframes blinkCursor {
            50% { border-right: 2px solid transparent; }
        }

        /* Efectos adicionales para la inmersi√≥n */
        .glow {
            text-shadow: 0 0 10px currentColor;
            box-shadow: 0 0 20px rgba(0, 255, 102, 0.3);
        }

        /* MEJORAS: Animaciones m√°s fluidas */
        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .smooth-transition {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateZ(0);
            will-change: transform, opacity;
        }

        .slide-in {
            animation: slideIn 0.5s ease-out forwards;
        }

        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(20px) translateZ(0); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) translateZ(0); 
            }
        }

        /* Skeleton loaders para mejores estados de carga */
        .skeleton {
            background: linear-gradient(90deg, 
                rgba(0, 255, 102, 0.1) 25%, 
                rgba(0, 255, 102, 0.2) 50%, 
                rgba(0, 255, 102, 0.1) 75%
            );
            background-size: 200% 100%;
            animation: skeletonLoading 1.5s infinite;
        }

        @keyframes skeletonLoading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .skeleton-text {
            height: 1rem;
            border-radius: 2px;
            margin: 0.5rem 0;
        }

        .skeleton-title {
            height: 1.5rem;
            width: 60%;
            border-radius: 2px;
            margin: 1rem 0;
        }

        .skeleton-button {
            height: 2.5rem;
            width: 120px;
            border-radius: 4px;
            margin: 1rem 0;
        }

        /* Efectos especiales para la pantalla de boot */
        #boot-screen {
            background: radial-gradient(ellipse at center, rgba(0, 20, 10, 0.8) 0%, rgba(0, 0, 0, 1) 70%);
        }

        #boot-screen pre {
            text-shadow: 0 0 5px var(--terminal-color);
        }

        /* Estilos para controles de audio */
        .audio-controls {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid var(--dark-border);
        }

        .audio-controls button {
            font-size: 11px;
            padding: 6px 12px;
            transition: all 0.2s ease;
            background: transparent;
            border: 1px solid var(--terminal-color);
            color: var(--terminal-color);
        }

        .audio-controls button:hover {
            background: var(--terminal-color);
            color: black;
            box-shadow: 0 0 10px var(--terminal-color);
        }

        .audio-controls .stop-btn {
            border-color: var(--error-color);
            color: var(--error-color);
        }

        .audio-controls .stop-btn:hover {
            background: var(--error-color);
            color: white;
        }

        /* Animaci√≥n del ASCII art */
        @keyframes bootup {
            0% { 
                opacity: 0; 
                transform: scale(0.8) translateY(20px); 
            }
            50% { 
                opacity: 0.7; 
                transform: scale(1.05) translateY(0); 
            }
            100% { 
                opacity: 1; 
                transform: scale(1) translateY(0); 
            }
        }

        #boot-screen pre {
            animation: bootup 2s ease-out;
        }

        /* Estilos para la pantalla de carga del SO */
        #os-loading-screen {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #0a0a0a 100%);
            transition: opacity 1s ease-in-out;
        }

        #boot-console {
            max-height: 60vh;
            scrollbar-width: thin;
            scrollbar-color: var(--terminal-color) #000;
        }

        #boot-console::-webkit-scrollbar {
            width: 8px;
        }

        #boot-console::-webkit-scrollbar-track {
            background: #000;
        }

        #boot-console::-webkit-scrollbar-thumb {
            background: var(--terminal-color);
            border-radius: 4px;
        }

        /* Efecto de escritura para los mensajes de boot */
        .boot-message {
            opacity: 0;
            animation: fadeInText 0.1s ease-in forwards;
        }

        @keyframes fadeInText {
            to {
                opacity: 1;
            }
        }

        /* Efectos especiales para mensajes cr√≠ticos */
        .boot-error {
            color: var(--error-color);
            text-shadow: 0 0 5px var(--error-color);
        }

        .boot-success {
            color: var(--terminal-accent);
            text-shadow: 0 0 5px var(--terminal-accent);
        }

        .boot-warning {
            color: #ffaa00;
            text-shadow: 0 0 5px #ffaa00;
        }

        /* Estilo para elementos cr√≠ticos/peligrosos */
        .danger-text {
            color: var(--error-color);
            text-shadow: 0 0 8px var(--error-color);
            animation: dangerPulse 2s ease-in-out infinite;
        }
        @keyframes dangerPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Colores CSS custom para usar en las clases */
        .text-terminal-color { color: var(--terminal-color); }
        .text-terminal-accent { color: var(--terminal-accent); }
        .text-error-color { color: var(--error-color); }
        .border-terminal-color { border-color: var(--terminal-color); }
        .border-terminal-accent { border-color: var(--terminal-accent); }
        .border-error-color { border-color: var(--error-color); }
        .bg-terminal-accent { background-color: var(--terminal-accent); }
        .shadow-terminal-color { box-shadow: 0 0 20px var(--terminal-color); }
        .shadow-error-color { box-shadow: 0 0 20px var(--error-color); }

        /* Efectos de hover mejorados */
        .data-card {
            transition: all 0.3s ease;
        }
        .data-card:hover {
            transform: translateY(-2px);
        }

        /* Animaci√≥n de entrada para secciones */
        .screen {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Mejoras responsivas completas */
        @media (max-width: 1024px) {
            .text-4xl {
                font-size: 2.5rem;
            }
            .grid-responsive-4 {
                grid-template-columns: repeat(2, 1fr);
            }
            .grid-responsive-3 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            #app-container {
                padding: 0.5rem;
                border-width: 2px;
            }
            
            header {
                padding: 0.75rem;
            }
            
            .nav-link {
                font-size: 0.65rem;
                margin: 0 0.1rem;
                padding: 0.3rem 0.4rem;
            }
            
            .text-4xl {
                font-size: 1.8rem;
                line-height: 1.2;
            }
            
            .text-3xl {
                font-size: 1.5rem;
            }
            
            .text-2xl {
                font-size: 1.25rem;
            }
            
            .text-xl {
                font-size: 1.1rem;
            }
            
            .grid {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }
            
            .p-8 {
                padding: 1rem;
            }
            
            .p-6 {
                padding: 0.75rem;
            }
            
            .p-4 {
                padding: 0.5rem;
            }
            
            .mb-6 {
                margin-bottom: 1rem;
            }
            
            .space-y-6 > * + * {
                margin-top: 1rem;
            }
            
            .inventory-tab {
                font-size: 0.7rem;
                padding: 0.5rem 0.75rem;
            }
            
            .data-card {
                padding: 0.75rem;
            }
            
            .border-l-4 {
                padding-left: 0.5rem;
            }
            
            /* Modales m√≥viles */
            .modal-container {
                width: 95% !important;
                max-width: none !important;
            }
        }

        @media (max-width: 480px) {
            body {
                font-size: 14px;
            }
            
            #app-container {
                padding: 0.25rem;
                border-width: 1px;
            }
            
            header {
                padding: 0.5rem;
            }
            
            .nav-link {
                font-size: 0.6rem;
                margin: 0;
                padding: 0.25rem 0.3rem;
                display: block;
                text-align: center;
            }
            
            #top-nav {
                display: flex;
                flex-wrap: wrap;
                gap: 0.25rem;
            }
            
            .text-4xl {
                font-size: 1.5rem;
                margin: 0.5rem 0;
            }
            
            .text-3xl {
                font-size: 1.3rem;
            }
            
            .text-2xl {
                font-size: 1.1rem;
            }
            
            .text-5xl {
                font-size: 2rem;
            }
            
            .inventory-tab {
                font-size: 0.6rem;
                padding: 0.4rem 0.5rem;
            }
            
            .flex.justify-between {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .terminal-btn {
                padding: 0.4rem 1rem;
                font-size: 0.8rem;
                width: 100%;
                margin-bottom: 0.5rem;
            }
            
            .space-x-4 > * + * {
                margin-left: 0;
            }
            
            /* ASCII Art responsive */
            pre {
                font-size: 0.5rem;
                overflow-x: auto;
            }
            
            /* Tables m√≥vil */
            table {
                font-size: 0.7rem;
            }
            
            th, td {
                padding: 0.25rem;
            }
        }

        /* Mejorar scroll horizontal en tablas */
        .overflow-x-auto {
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
        }
        
        .overflow-x-auto::-webkit-scrollbar {
            height: 4px;
        }
        
        .overflow-x-auto::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }
        
        .overflow-x-auto::-webkit-scrollbar-thumb {
            background: var(--terminal-color);
            border-radius: 2px;
        }
    </style>
</head>
<body>

    <!-- Pantalla de inicio (Boot) -->
    <div id="boot-screen" class="absolute inset-0 flex flex-col items-center justify-center bg-black transition-opacity duration-1000">
        <!-- ASCII Art MOTHERSHIP -->
        <div class="text-center mb-6">
            <pre class="text-xs sm:text-sm md:text-lg lg:text-xl text-terminal-color flicker font-mono leading-tight overflow-x-auto">
  __  __  ____ _______ _    _ ______ _____   _____ _    _ _____ _____  
 |  \/  |/ __ \__   __| |  | |  ____|  __ \ / ____| |  | |_   _|  __ \ 
 | \  / | |  | | | |  | |__| | |__  | |__) | (___ | |__| | | | | |__) |
 | |\/| | |  | | | |  |  __  |  __| |  _  / \___ \|  __  | | | |  ___/ 
 | |  | | |__| | | |  | |  | | |____| | \ \ ____) | |  | |_| |_| |     
 |_|  |_|\____/  |_|  |_|  |_|______|_|  \_\_____/|_|  |_|_____|_|     
                                                                       
                                                                        
            </pre>
            <p class="text-terminal-accent text-sm mt-2">CENTRAL COMMAND SYSTEM</p>
            <p class="text-terminal-color text-xs">[ BIENVENIDO, TRABAJADOR ]</p>
        </div>

        <!-- Secci√≥n de Estado del Sistema -->
        <div class="mt-4 space-y-3 text-center max-w-lg">
            <div class="border border-terminal-color p-3 bg-black/50">
                <p class="text-terminal-accent text-base font-bold mb-2 flicker">
                    >> INICIALIZANDO COMANDO CENTRAL <<
                </p>
                <p class="text-xs text-terminal-color mb-3">
                    [ ESTABLECIENDO CONEXI√ìN AL SISTEMA DE RECLUTAMIENTO ]
                </p>
                
                <!-- Barra de Progreso -->
                <div class="loading-bar w-full h-2 border border-terminal-color bg-black overflow-hidden mb-3">
                    <div class="loading-fill h-full bg-terminal-color w-0"></div>
                </div>
                
                <!-- Estado del Sistema -->
                <div class="text-xs text-terminal-color space-y-1">
                    <p>SERVIDOR: <span class="text-terminal-accent">OPERATIVO</span> | CONEXI√ìN: <span class="text-terminal-accent">SEGURA</span></p>
                    <p>M√ìDULOS: <span class="text-terminal-accent">4/4 ONLINE</span> | STATUS: <span class="text-terminal-accent">READY</span></p>
                </div>
            </div>
            
            <!-- Bot√≥n de Acceso -->
            <button id="enter-btn" class="terminal-btn text-lg md:text-xl px-6 py-3 glow">
                ACCESO AL PUENTE [ CONNECT ]
            </button>
            
            <!-- Informaci√≥n Adicional -->
            <p class="text-xs text-gray-500 mt-3 max-w-sm">
                Haga clic para acceder al sistema de comando y revisar contratos disponibles.
            </p>
        </div>
    </div>

    <!-- Pantalla de Carga del Sistema Operativo -->
    <div id="os-loading-screen" class="hidden absolute inset-0 bg-black text-terminal-color overflow-hidden">
        <div class="h-full flex flex-col">
            <!-- Header del Sistema -->
            <div class="p-4 border-b border-terminal-color">
                <div class="flex justify-between items-center">
                    <div class="text-sm">
                        <span class="text-terminal-accent">MOTHERSHIP OS v7.3.2</span> - Build 2247.11.09
                    </div>
                    <div class="text-xs text-gray-400" id="boot-timestamp"></div>
                </div>
            </div>

            <!-- Consola de Boot -->
            <div class="flex-1 p-4 font-mono text-xs leading-relaxed overflow-y-auto">
                <div id="boot-console" class="space-y-1">
                    <!-- Los mensajes de boot se a√±adir√°n aqu√≠ din√°micamente -->
                </div>
                
                <!-- Cursor parpadeante -->
                <div class="flex items-center mt-2" id="terminal-prompt">
                    <span class="text-terminal-color">root@mothership-cmd:~$ </span>
                    <span id="boot-cursor" class="inline-block w-2 h-4 bg-terminal-color ml-1 animate-pulse"></span>
                </div>
            </div>

            <!-- Barra de progreso del sistema -->
            <div class="p-4 border-t border-terminal-color">
                <div class="mb-2 flex justify-between text-xs">
                    <span>Inicializando Sistema Operativo...</span>
                    <span id="os-progress-text">0%</span>
                </div>
                <div class="w-full h-2 border border-terminal-color bg-black">
                    <div id="os-progress-bar" class="h-full bg-terminal-color transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenedor Principal de la SPA (Inicialmente oculto) -->
    <div id="app-container" class="hidden relative flex flex-col">
        <!-- Encabezado y Navegaci√≥n Horizontal (Mothership Command System) -->
        <header class="p-2 sm:p-3 md:p-4 border-b border-dark-border flex-shrink-0">
            <h1 class="text-lg sm:text-xl md:text-2xl text-white mb-2">Mothership Command System</h1>
            <nav id="top-nav" class="text-xs sm:text-sm flex flex-wrap gap-1">
                <!-- Los botones de navegaci√≥n ahora son enlaces con corchetes -->
                <a class="nav-link active" data-screen="landing">[ <span class="hidden sm:inline">MANDATOS</span><span class="sm:hidden">MAND</span> ]</a>
                <a class="nav-link" data-screen="contratos">[ <span class="hidden sm:inline">CONTRATOS</span><span class="sm:hidden">CONT</span> ]</a>
                <a class="nav-link" data-screen="inventario">[ <span class="hidden sm:inline">INVENTARIO</span><span class="sm:hidden">INV</span> ]</a>
                <a class="nav-link" data-screen="database">[ <span class="hidden sm:inline">BASE DE DATOS</span><span class="sm:hidden">DATA</span> ]</a>
                <a class="nav-link" data-screen="terminal">[ <span class="hidden sm:inline">TERMINAL ACCESS</span><span class="sm:hidden">TERM</span> ]</a>
            </nav>
        </header>

        <!-- √Årea de Contenido Principal -->
        <main id="content-area" class="flex-grow overflow-y-auto p-2 sm:p-3 md:p-4">
            <!-- P√ÅGINA 1: LANDING PAGE -->
            <section id="landing" class="screen">
                <p class="text-sm flicker border-b border-dark-border pb-2 mb-4">// MOTHERSHIP COMMAND: UNIDAD M-05 INTRANET</p>
                <h2 class="text-2xl sm:text-3xl md:text-4xl my-2 sm:my-3 md:my-4 text-terminal-accent glow">M√ìDULO DE RECLUTAMIENTO ACTIVO</h2>
                
                <!-- Panel Principal de Bienvenida -->
                <div class="p-3 sm:p-4 md:p-6 border border-terminal-color sm:border-2 bg-black shadow-lg shadow-terminal-color/20 mb-4 sm:mb-6">
                    <p class="text-sm sm:text-lg md:text-xl mb-2 sm:mb-4 text-terminal-color flicker">>> BIENVENIDO, TRABAJADOR. (FECHA ESTELAR: 2247.11.09)</p>
                    <div class="space-y-4 text-sm">
                        <p class="text-terminal-color">
                            <span class="text-terminal-accent font-bold">MOTHERSHIP CORPORATION</span> - La empresa l√≠der en exploraci√≥n del espacio profundo y desarrollo de fronteras coloniales. Desde 2157, hemos estado construyendo mundos mejores a trav√©s de la innovaci√≥n, la determinaci√≥n y el sacrificio de valientes trabajadores como usted.
                        </p>
                        <p class="text-terminal-color">
                            Nuestras <span class="text-terminal-accent">operaciones especializadas</span> requieren individuos con experiencia en entornos hostiles, capacidad de adaptaci√≥n y resistencia mental excepcional. Las oportunidades de contrato disponibles ofrecen compensaci√≥n competitiva y la posibilidad de contribuir al avance de la humanidad entre las estrellas.
                        </p>
                        <div class="border-l-4 border-terminal-accent pl-4 my-4 bg-black/50">
                            <p class="text-terminal-accent font-bold mb-2">MISI√ìN CORPORATIVA:</p>
                            <p class="text-sm text-terminal-color">"Expandir los horizontes humanos mediante la exploraci√≥n responsable, la extracci√≥n eficiente de recursos y el establecimiento de infraestructura colonial sostenible. Cada trabajador es un elemento vital en nuestra cadena de √©xito."</p>
                        </div>
                    </div>
                </div>

                <!-- Panel de Estad√≠sticas Corporativas -->
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4 mb-4 sm:mb-6">
                    <div class="data-card text-center">
                        <p class="text-xl sm:text-2xl text-terminal-accent font-bold">847</p>
                        <p class="text-xs text-terminal-color">Mundos Explorados</p>
                    </div>
                    <div class="data-card text-center">
                        <p class="text-xl sm:text-2xl text-terminal-accent font-bold">15.6M</p>
                        <p class="text-xs text-terminal-color">Trabajadores Activos</p>
                    </div>
                    <div class="data-card text-center">
                        <p class="text-xl sm:text-2xl text-terminal-accent font-bold">99.7%</p>
                        <p class="text-xs text-terminal-color">Tasa de Satisfacci√≥n</p>
                    </div>
                </div>

                <!-- Panel de Advertencias Legales -->
                <div class="p-4 border border-error-color bg-black/30 mb-4">
                    <p class="text-sm text-error-color danger-text mb-2">
                        ‚ö†Ô∏è ADVERTENCIA LEGAL OBLIGATORIA ‚ö†Ô∏è
                    </p>
                    <p class="text-xs text-terminal-color">
                        MOTHERSHIP CORPORATION no se hace responsable por lesiones, muerte, desapariciones, trauma psicol√≥gico, mutaciones gen√©ticas, infecciones parasitarias, posesi√≥n demon√≠aca, alteraci√≥n temporal o cualquier otro efecto adverso que pueda resultar de la ejecuci√≥n del contrato. El personal debe familiarizarse con todos los protocolos de seguridad disponibles en la Base de Datos antes de proceder.
                    </p>
                    <p class="text-xs text-gray-500 mt-2">
                        Los beneficiarios designados ser√°n notificados en caso de MIA/KIA seg√∫n el Protocolo 7-Alpha.
                    </p>
                </div>

                <div class="text-center">
                    <p class="text-sm text-terminal-color mb-2">Proceda a [ CONTRATOS ] para revisar las asignaciones disponibles.</p>
                    <p class="text-xs text-gray-500 italic">
                        "El universo es vasto. La rentabilidad es la √∫nica ley. Building Better Worlds."
                    </p>
                </div>
            </section>

            <!-- P√ÅGINA 2: CONTRATOS -->
            <section id="contratos" class="screen hidden">
                <p class="text-sm flicker border-b border-dark-border pb-2 mb-4">// CONTRATOS ACTIVOS</p>
                <h2 class="text-2xl sm:text-3xl md:text-4xl my-2 sm:my-3 md:my-4 text-terminal-accent">LISTADO DE ASIGNACIONES (Q3-2247)</h2>
                <div id="contract-list" class="space-y-6">
                    <!-- Los contratos se cargan din√°micamente desde CONTRACT_DATA -->
                </div>
            </section>

            <!-- P√ÅGINA 3: ARSENAL Y EQUIPAMIENTO -->
            <section id="inventario" class="screen hidden">
                <p class="text-sm flicker border-b border-dark-border pb-2 mb-4">// ARSENAL CORPORATIVO - NIVEL DE ACCESO: AUTORIZADO</p>
                <h2 class="text-2xl sm:text-3xl md:text-4xl my-2 sm:my-3 md:my-4 text-terminal-accent glow">CAT√ÅLOGO DE EQUIPAMIENTO EST√ÅNDAR</h2>
                
                <!-- Aviso de Seguridad -->
                <div class="mb-6 p-4 border border-error-color bg-black/50">
                    <p class="text-sm text-error-color danger-text mb-2">‚ö†Ô∏è ACCESO RESTRINGIDO - PERSONAL AUTORIZADO √öNICAMENTE ‚ö†Ô∏è</p>
                    <p class="text-xs text-terminal-color">
                        El equipamiento listado a continuaci√≥n est√° disponible para personal contratado en misiones activas. 
                        El mal uso o p√©rdida de equipo corporativo resultar√° en deducciones salariales seg√∫n el C√≥digo de Conducta 7-Alpha.
                    </p>
                </div>

                <!-- Stats de Arsenal -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6">
                    <div class="data-card text-center">
                        <p class="text-lg sm:text-xl md:text-2xl text-terminal-accent font-bold">47</p>
                        <p class="text-xs text-terminal-color">Armas Catalogadas</p>
                    </div>
                    <div class="data-card text-center">
                        <p class="text-lg sm:text-xl md:text-2xl text-terminal-accent font-bold">23</p>
                        <p class="text-xs text-terminal-color">Tipos de Armadura</p>
                    </div>
                    <div class="data-card text-center">
                        <p class="text-lg sm:text-xl md:text-2xl text-terminal-accent font-bold">156</p>
                        <p class="text-xs text-terminal-color">Items Especializados</p>
                    </div>
                    <div class="data-card text-center">
                        <p class="text-lg sm:text-xl md:text-2xl text-terminal-accent font-bold">99.2%</p>
                        <p class="text-xs text-terminal-color">Disponibilidad</p>
                    </div>
                </div>

                <!-- Pesta√±as de navegaci√≥n -->
                <div class="flex flex-col sm:flex-row mb-4 sm:mb-6 border-b border-dark-border overflow-x-auto">
                    <button onclick="showInventoryTab('weapons')" id="weapons-tab" class="inventory-tab px-3 sm:px-4 md:px-6 py-2 sm:py-3 text-error-color border-b-2 border-error-color font-bold text-xs sm:text-sm flex-shrink-0">
                        üî´ <span class="hidden sm:inline">ARMAMENTO</span><span class="sm:hidden">ARM</span>
                    </button>
                    <button onclick="showInventoryTab('armor')" id="armor-tab" class="inventory-tab px-3 sm:px-4 md:px-6 py-2 sm:py-3 text-gray-400 border-b-2 border-transparent hover:text-terminal-accent text-xs sm:text-sm flex-shrink-0">
                        üõ°Ô∏è <span class="hidden sm:inline">PROTECCI√ìN</span><span class="sm:hidden">PROT</span>
                    </button>
                    <button onclick="showInventoryTab('items')" id="items-tab" class="inventory-tab px-3 sm:px-4 md:px-6 py-2 sm:py-3 text-gray-400 border-b-2 border-transparent hover:text-terminal-color text-xs sm:text-sm flex-shrink-0">
                        ‚öôÔ∏è <span class="hidden sm:inline">EQUIPAMIENTO</span><span class="sm:hidden">EQUIP</span>
                    </button>
                </div>

                <!-- Contenido -->
                <div id="inventory-content">
                    
                    <!-- ARMAMENTO -->
                    <div id="weapons-panel" class="inventory-panel">
                        <div class="mb-4">
                            <h3 class="text-2xl text-error-color mb-2">üìã CAT√ÅLOGO DE ARMAMENTO CORPORATIVO</h3>
                            <p class="text-xs text-gray-400">Especificaciones t√©cnicas y requisitos operacionales</p>
                        </div>
                        
                        <div class="data-card border-error-color">
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead>
                                        <tr class="border-b border-error-color">
                                            <th class="text-left text-error-color p-3 font-bold">DESIGNACI√ìN</th>
                                            <th class="text-center text-error-color p-3 font-bold">COSTE</th>
                                            <th class="text-center text-error-color p-3 font-bold">ALCANCE</th>
                                            <th class="text-center text-error-color p-3 font-bold">DA√ëO</th>
                                            <th class="text-center text-error-color p-3 font-bold">CARGA</th>
                                            <th class="text-center text-error-color p-3 font-bold">TRAUMA</th>
                                            <th class="text-left text-error-color p-3 font-bold">CARACTER√çSTICAS</th>
                                        </tr>
                                    </thead>
                                    <tbody id="weapons-data" class="text-terminal-color">
                                        <tr><td colspan="7" class="text-center p-4 text-gray-400">Cargando datos del arsenal...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- PROTECCI√ìN -->
                    <div id="armor-panel" class="inventory-panel hidden">
                        <div class="mb-4">
                            <h3 class="text-2xl text-terminal-accent mb-2">üõ°Ô∏è SISTEMAS DE PROTECCI√ìN CERTIFICADOS</h3>
                            <p class="text-xs text-gray-400">Equipamiento de supervivencia y combate autorizado</p>
                        </div>
                        
                        <div class="data-card border-terminal-accent">
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead>
                                        <tr class="border-b border-terminal-accent">
                                            <th class="text-left text-terminal-accent p-3 font-bold">SISTEMA</th>
                                            <th class="text-center text-terminal-accent p-3 font-bold">COSTE</th>
                                            <th class="text-center text-terminal-accent p-3 font-bold">PROTECCI√ìN</th>
                                            <th class="text-center text-terminal-accent p-3 font-bold">OX√çGENO</th>
                                            <th class="text-center text-terminal-accent p-3 font-bold">MOVILIDAD</th>
                                            <th class="text-left text-terminal-accent p-3 font-bold">ESPECIFICACIONES</th>
                                        </tr>
                                    </thead>
                                    <tbody id="armor-data" class="text-terminal-color">
                                        <tr><td colspan="6" class="text-center p-4 text-gray-400">Cargando sistemas de protecci√≥n...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- EQUIPAMIENTO -->
                    <div id="items-panel" class="inventory-panel hidden">
                        <div class="mb-4">
                            <h3 class="text-2xl text-terminal-color mb-2">‚öôÔ∏è EQUIPAMIENTO GENERAL EST√ÅNDAR</h3>
                            <p class="text-xs text-gray-400">Herramientas, dispositivos y suministros operacionales</p>
                        </div>
                        
                        <div class="data-card border-terminal-color">
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead>
                                        <tr class="border-b border-terminal-color">
                                            <th class="text-left text-terminal-color p-3 font-bold">EQUIPAMIENTO</th>
                                            <th class="text-center text-terminal-color p-3 font-bold">COSTE</th>
                                            <th class="text-left text-terminal-color p-3 font-bold">DESCRIPCI√ìN T√âCNICA</th>
                                        </tr>
                                    </thead>
                                    <tbody id="items-data" class="text-terminal-color">
                                        <tr><td colspan="3" class="text-center p-4 text-gray-400">Cargando inventario de herramientas...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- C√≥digo HTML obsoleto eliminado -->
                <!-- Informaci√≥n Corporativa -->
                <div class="mt-8 p-4 border-t border-dark-border">
                    <h3 class="text-xl text-terminal-accent mb-4">üìã INFORMACI√ìN DE SUMINISTROS</h3>
                    <div class="grid md:grid-cols-2 gap-6 text-sm">
                        <div class="space-y-3">
                            <div class="p-3 border border-terminal-color bg-black/30">
                                <p class="text-terminal-accent font-bold mb-2">POL√çTICAS DE EQUIPAMIENTO:</p>
                                <ul class="text-terminal-color space-y-1 text-xs">
                                    <li>‚Ä¢ Todo el equipamiento debe ser devuelto al finalizar la misi√≥n</li>
                                    <li>‚Ä¢ El personal es responsable del mantenimiento b√°sico</li>
                                    <li>‚Ä¢ Reportar inmediatamente cualquier mal funcionamiento</li>
                                    <li>‚Ä¢ El equipo perdido se deducir√° del salario final</li>
                                </ul>
                            </div>
                            <div class="p-3 border border-terminal-color bg-black/30">
                                <p class="text-terminal-accent font-bold mb-2">PROCEDIMIENTOS DE REQUISICI√ìN:</p>
                                <ul class="text-terminal-color space-y-1 text-xs">
                                    <li>‚Ä¢ Solicitudes deben ser aprobadas por el Oficial de Misi√≥n</li>
                                    <li>‚Ä¢ Equipo especializado requiere certificaci√≥n previa</li>
                                    <li>‚Ä¢ Las armas de Clase IV necesitan autorizaci√≥n Nivel 7</li>
                                    <li>‚Ä¢ Tiempo de procesamiento est√°ndar: 2-4 horas</li>
                                </ul>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="p-3 border border-dark-border bg-black/30">
                                <p class="text-terminal-accent font-bold mb-2">CONTACTOS IMPORTANTES:</p>
                                <div class="text-terminal-color space-y-1 text-xs">
                                    <p><strong>Arsenal Principal:</strong> Ext. 2247-ARM</p>
                                    <p><strong>M√©dico/Survival:</strong> Ext. 2247-MED</p>
                                    <p><strong>Tecnolog√≠a:</strong> Ext. 2247-TECH</p>
                                    <p><strong>Emergencias:</strong> C√≥digo Rojo General</p>
                                </div>
                            </div>
                            <div class="p-3 border border-error-color bg-black/30">
                                <p class="text-error-color font-bold mb-2 danger-text">‚ö†Ô∏è RECORDATORIO DE SEGURIDAD:</p>
                                <p class="text-terminal-color text-xs">
                                    El mal uso de equipamiento corporativo puede resultar en lesiones graves, 
                                    muerte o terminaci√≥n del contrato. Mothership Corporation no se hace 
                                    responsable por accidentes derivados del uso inadecuado del equipamiento.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- P√ÅGINA 4: BASE DE DATOS -->
            <section id="database" class="screen hidden">
                <p class="text-sm flicker border-b border-dark-border pb-2 mb-4">// PROTOCOLOS CORPORATIVOS - ACCESO NIVEL 2</p>
                <h2 class="text-2xl sm:text-3xl md:text-4xl my-2 sm:my-3 md:my-4 text-terminal-accent glow">RECURSOS DE SUPERVIVENCIA Y REFERENCIA</h2>
                
                <!-- Aviso de Seguridad -->
                <div class="mb-6 p-3 border border-terminal-accent bg-black/50">
                    <p class="text-sm text-terminal-accent mb-2"> ACCESO AUTORIZADO √öNICAMENTE PARA PERSONAL CONTRATADO</p>
                    <p class="text-xs text-terminal-color">
                        Los recursos contenidos en esta secci√≥n son propiedad de MOTHERSHIP CORP. 
                        Su distribuci√≥n no autorizada constituye una violaci√≥n del Acuerdo de Contratista Nivel-7.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                    <!-- Tarjeta 1: Gu√≠a de Supervivencia -->
                    <a href="assets/Mothership Player's Survival Guide.pdf" target="_blank" class="data-card block hover:bg-green-900/20 cursor-pointer">
                        <div class="flex items-start justify-between mb-3">
                            <div class="text-lg sm:text-xl text-terminal-color font-bold">Gu√≠a de Supervivencia</div>
                            <span class="text-xs text-terminal-accent border border-terminal-accent px-2 py-1">PDF</span>
                        </div>
                        <p class="text-sm text-terminal-color mb-2">
                            Manual oficial completo para operaciones en entornos hostiles. 
                            Incluye protocolos de emergencia, primeros auxilios y procedimientos de evacuaci√≥n.
                        </p>
                        <div class="flex justify-between items-center text-xs">
                            <span class="text-gray-400">Versi√≥n: 7.3.2 | Tama√±o: 2.4MB</span>
                            <span class="text-terminal-accent hover:text-white">‚Üí ABRIR PDF</span>
                        </div>
                    </a>

                    <!-- Tarjeta 2: Cheatsheet -->
                    <a href="assets/mothership-cheat-sheet-v3.pdf" target="_blank" class="data-card block hover:bg-green-900/20 cursor-pointer">
                        <div class="flex items-start justify-between mb-3">
                            <div class="text-xl text-terminal-color font-bold">Cheatsheet de Mec√°nicas</div>
                            <span class="text-xs text-terminal-accent border border-terminal-accent px-2 py-1">PDF</span>
                        </div>
                        <p class="text-sm text-terminal-color mb-2">
                            Referencia r√°pida para tiradas de dados, combate, p√°nico, estr√©s y salvaciones. 
                            Optimizada para consulta durante operaciones activas.
                        </p>
                        <div class="flex justify-between items-center text-xs">
                            <span class="text-gray-400">Actualizado: 2247.10.15</span>
                            <span class="text-terminal-accent hover:text-white">‚Üí ABRIR PDF</span>
                        </div>
                    </a>

                    <!-- Tarjeta 3: Companion App -->
                    <a href="https://mothershipcompanion.com/" target="_blank" class="data-card block hover:bg-green-900/20 cursor-pointer">
                        <div class="flex items-start justify-between mb-3">
                            <div class="text-xl text-terminal-color font-bold">Companion App V2.1</div>
                            <span class="text-xs text-terminal-accent border border-terminal-accent px-2 py-1">APP</span>
                        </div>
                        <p class="text-sm text-terminal-color mb-2">
                            Herramienta digital para gesti√≥n de personajes, inventario y estad√≠sticas. 
                            Sincronizaci√≥n en tiempo real con el Command System.
                        </p>
                        <div class="flex justify-between items-center text-xs">
                            <span class="text-gray-400">Estado: Online | Usuarios: 847</span>
                            <span class="text-terminal-accent hover:text-white">‚Üí ACCESO EXTERNO</span>
                        </div>
                    </a>

                    <!-- Tarjeta 4: Video Tutorial -->
                    <a href="https://www.youtube.com/watch?si=5D0zFjOcBjgyv9yr&v=zrKONqM0NjU&feature=youtu.be" target="_blank" class="data-card block hover:bg-green-900/20 cursor-pointer">
                        <div class="flex items-start justify-between mb-3">
                            <div class="text-xl text-terminal-color font-bold">Tutorial Operacional (RECOMENDADO)</div>
                            <span class="text-xs text-terminal-accent border border-terminal-accent px-2 py-1">VID</span>
                        </div>
                        <p class="text-sm text-terminal-color mb-2">
                            Instrucciones visuales sobre mec√°nicas de juego, creaci√≥n de personajes 
                            y gesti√≥n de situaciones de p√°nico. 
                        </p>
                        <div class="flex justify-between items-center text-xs">
                            <span class="text-gray-400">Duraci√≥n: 20min | HD 1080p</span>
                            <span class="text-terminal-accent hover:text-white">‚Üí VER EN YOUTUBE</span>
                        </div>
                    </a>

                    <!-- Tarjeta 5: Video Tutorial de Combate -->
                    <a href="https://www.youtube.com/watch?si=er0aCcEoYm2XVwYx&v=lxGvcQNEPJo&feature=youtu.be" target="_blank" class="data-card block hover:bg-green-900/20 cursor-pointer">
                        <div class="flex items-start justify-between mb-3">
                            <div class="text-xl text-terminal-color font-bold">Tutorial de Combate</div>
                            <span class="text-xs text-terminal-accent border border-terminal-accent px-2 py-1">VID</span>
                        </div>
                        <p class="text-sm text-terminal-color mb-2">
                            Instrucciones sobre combate y supervivencia en entornos hostiles.
                        </p>
                        <div class="flex justify-between items-center text-xs">
                            <span class="text-gray-400">Duraci√≥n: 15min | HD 1080p</span>
                            <span class="text-terminal-accent hover:text-white">‚Üí VER EN YOUTUBE</span>
                        </div>
                    </a>

                    <!-- Tarjeta 6: Video Tutorial Opcional -->
                    <a href="https://www.youtube.com/watch?v=iynHGCwLc0M" target="_blank" class="data-card block hover:bg-green-900/20 cursor-pointer">
                        <div class="flex items-start justify-between mb-3">
                            <div class="text-xl text-terminal-color font-bold">Tutorial Opcional</div>
                            <span class="text-xs text-terminal-accent border border-terminal-accent px-2 py-1">VID</span>
                        </div>
                        <p class="text-sm text-terminal-color mb-2">
                            Instrucciones org√°nicas sobre mec√°nicas de juego, creaci√≥n de personajes 
                            y gesti√≥n de situaciones de p√°nico. 
                        </p>
                        <div class="flex justify-between items-center text-xs">
                            <span class="text-gray-400">Duraci√≥n: 30min | HD 1080p</span>
                            <span class="text-terminal-accent hover:text-white">‚Üí VER EN YOUTUBE</span>
                        </div>
                    </a>
                </div>

                <!-- Secci√≥n de Links Adicionales -->
                <div class="mt-8 p-4 border-t border-dark-border">
                    <h3 class="text-xl text-terminal-accent mb-4">ENLACES CORPORATIVOS ADICIONALES</h3>
                    <div class="grid md:grid-cols-2 gap-4 text-sm">
                        <div class="space-y-2">
                            <a href="#" class="block text-terminal-color hover:text-terminal-accent">
                                ‚Üí Portal Oficial de Mothership RPG
                            </a>
                            <a href="#" class="block text-terminal-color hover:text-terminal-accent">
                                ‚Üí Comunidad Discord del Sistema
                            </a>
                            <a href="#" class="block text-terminal-color hover:text-terminal-accent">
                                ‚Üí M√≥dulos y Aventuras Oficiales
                            </a>
                        </div>
                        <div class="space-y-2">
                            <a href="#" class="block text-terminal-color hover:text-terminal-accent">
                                ‚Üí Generador de Naves y Sistemas
                            </a>
                            <a href="#" class="block text-terminal-color hover:text-terminal-accent">
                                ‚Üí Biblioteca de Tokens y Mapas
                            </a>
                            <a href="#" class="block text-terminal-color hover:text-terminal-accent">
                                ‚Üí Centro de Reportes de Errores
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- P√ÅGINA 5: TERMINAL RESTRINGIDO -->
            <section id="terminal" class="screen hidden">
                <p class="text-sm flicker border-b border-dark-border pb-2 mb-4">// ACCESO DE NIVEL 4 - CLASIFICADO</p>
                <h2 class="text-2xl sm:text-3xl md:text-4xl my-2 sm:my-3 md:my-4 text-terminal-accent danger-text">TERMINAL DE INTEL CR√çTICO</h2>

                <div id="login-form" class="max-w-lg mx-auto p-4 sm:p-6 md:p-8 border border-terminal-color sm:border-2 shadow-lg shadow-terminal-color/30 bg-black/80">
                    <!-- Header del Terminal -->
                    <div class="text-center mb-6">
                        <p class="text-lg text-terminal-color font-bold mb-2">‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MOTHERSHIP SECURE ACCESS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó</p>
                        <p class="text-sm text-terminal-accent">‚ïë  TERMINAL DE ACCESO RESTRINGIDO     ‚ïë</p>
                        <p class="text-sm text-terminal-color">‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù</p>
                    </div>

                    <!-- Estado del Sistema -->
                    <div class="mb-6 p-3 border border-dark-border bg-black/50">
                        <p class="text-xs text-terminal-color mb-1">ESTADO DEL SISTEMA: <span class="text-terminal-accent">OPERATIVO</span></p>
                        <p class="text-xs text-terminal-color mb-1">CONEXI√ìN SEGURA: <span class="text-terminal-accent">ESTABLECIDA</span></p>
                        <p class="text-xs text-terminal-color mb-1">NIVEL DE ACCESO: <span class="text-error-color">PENDIENTE DE AUTENTICACI√ìN</span></p>
                        <p class="text-xs text-terminal-color">INTENTOS RESTANTES: <span id="attempts-remaining" class="text-terminal-accent">3</span></p>
                    </div>

                    <p class="mb-4 text-sm text-terminal-accent text-center font-bold">
                        >> INGRESE C√ìDIGO DE ACCESO DE CONTRATO AUTORIZADO <<
                    </p>
                    <input type="password" id="password-input" class="terminal-input mb-4 text-center text-lg" placeholder="[ * * * * * * * ]" maxlength="8">
                    <button id="login-btn" class="terminal-btn w-full mt-2 text-terminal-accent border-terminal-accent hover:bg-terminal-accent hover:text-black font-bold">
                        AUTENTICAR [ EXEC ]
                    </button>
                    <p id="login-message" class="mt-4 text-sm text-center min-h-[20px]"></p>

                    <!-- Informaci√≥n de Ayuda -->
                    <div class="mt-6 pt-4 border-t border-dark-border">
                        <p class="text-xs text-gray-500 text-center">
                            Los c√≥digos de acceso se proporcionan √∫nicamente tras aceptar contratos v√°lidos.<br>
                            Para soporte t√©cnico, contacte con el Departamento de Seguridad Digital.
                        </p>
                    </div>
                </div>

                <!-- Contenido Restringido (Inicialmente oculto) -->
                <div id="restricted-content" class="mt-8 hidden">
                    <!-- Bot√≥n de navegaci√≥n -->
                    <div class="mb-4 text-center">
                        <button id="back-to-menu-btn" class="terminal-btn text-terminal-accent border-terminal-accent hover:bg-terminal-accent hover:text-black px-6 py-2">
                            ‚Üê VOLVER AL MEN√ö PRINCIPAL
                        </button>
                    </div>

                    <!-- CONTENIDO YPSILON-14 -->
                    <div id="ypsilon-content" class="mission-content hidden">
                        <!-- BRIEFING YPSILON-14 - PRIORIDAD ALPHA-CERO -->
                        <div class="p-6 border-2 border-error-color bg-red-900/20 shadow-lg shadow-error-color/30 mb-6">
                        <div class="text-center mb-4">
                            <p class="text-3xl mb-2 text-error-color font-bold">‚ö†Ô∏è BRIEFING PRIORITARIO ‚ö†Ô∏è</p>
                            <p class="text-lg text-terminal-color">OPERACI√ìN: "YPSILON-14" - EXTRACCI√ìN ALPHA-CERO</p>
                        </div>
                        
                        <div class="border-t border-error-color pt-4 mb-4">
                            <p class="text-sm text-terminal-color mb-2">
                                <span class="text-error-color font-bold">C√ìDIGO DE CONTRATO:</span> CORP-EXTR-Y14-Delta-7
                            </p>
                            <p class="text-sm text-terminal-color mb-2">
                                <span class="text-error-color font-bold">PRIORIDAD:</span> 
                                <span class="text-error-color">BAJA</span>
                            </p>
                            <p class="text-sm text-terminal-color mb-4">
                                <span class="text-error-color font-bold">TIEMPO L√çMITE:</span> 2 horas m√°ximo en sitio
                            </p>
                        </div>

                        <div class="border border-terminal-color p-3 bg-gray-800/30">
                            <p class="text-terminal-accent font-bold mb-2">üéµ BRIEFING DE AUDIO - DIVISI√ìN LOG√çSTICA:</p>
                            <div class="flex items-center gap-3">
                                <button onclick="playMissionAudio('0', 'briefing')" 
                                        class="text-xs px-4 py-2 border border-terminal-color text-terminal-color hover:bg-terminal-color hover:text-black transition-all duration-200 flex items-center gap-2">
                                    ‚ñ∂ REPRODUCIR BRIEFING CORPORATIVO
                                </button>
                                <button onclick="playMissionAudio('0', 'mother')" 
                                        class="text-xs px-4 py-2 border border-terminal-accent text-terminal-accent hover:bg-terminal-accent hover:text-black transition-all duration-200">
                                    ‚ñ∂ AN√ÅLISIS MOTHER IA
                                </button>
                                <button onclick="stopAllMissionAudio()" 
                                        class="text-xs px-3 py-2 border border-error-color text-error-color hover:bg-error-color hover:text-white transition-all duration-200">
                                    ‚èπ PARAR
                                </button>
                            </div>
                            <p class="text-xs text-gray-400 mt-2">Divisi√≥n Log√≠stica Mothership - Ing. Mike Reynolds</p>
                        </div>

                        <!-- Intel Clasificado Ypsilon-14 -->
                        <div class="grid md:grid-cols-2 gap-6">
                            <!-- Datos de la Estaci√≥n Minera -->
                            <div class="data-card">
                                <h3 class="text-lg text-terminal-accent mb-3">üè≠ ESTACI√ìN MINERA YPSILON-14</h3>
                                <div class="space-y-2 text-sm">
                                    <p><strong>Ubicaci√≥n:</strong> Asteroide YPS-14, Sector 47-Beta</p>
                                    <p><strong>Operaci√≥n:</strong> Extracci√≥n de Metales Raros de Alta Densidad</p>
                                    <p><strong>Personal Clave:</strong> Ing. Mike Reynolds (Ge√≥logo Jefe)</p>
                                    <p><strong>Estado Instalaci√≥n:</strong> <span class="text-terminal-accent">OPERACIONAL</span></p>
                                    <p><strong>√öltima Transmisi√≥n:</strong> <span class="text-yellow-400">HACE 18 HORAS</span></p>
                                </div>
                            </div>

                            <!-- Perfil del Personal -->
                            <div class="data-card">
                                <h3 class="text-lg text-terminal-accent mb-3">üë§ INGENIERO MIKE REYNOLDS</h3>
                                <div class="space-y-2 text-sm">
                                    <p><strong>Clasificaci√≥n:</strong> Nivel Alpha - Acceso Total</p>
                                    <p><strong>Especialidad:</strong> Geolog√≠a Profunda, Metales Raros</p>
                                    <p><strong>Proyecto Asignado:</strong> <span class="text-error-color">CLASIFICADO - IMPORTANCIA M√ÅXIMA</span></p>
                                    <p><strong>Estado Psicol√≥gico:</strong> <span class="text-yellow-400">Estr√©s Operacional Alto</span></p>
                                    <p><strong>Reasignaci√≥n:</strong> <span class="text-terminal-accent">AUTORIZADA - PRIORIDAD 1</span></p>
                                </div>
                            </div>
                        </div>

                        <!-- Protocolos de Extracci√≥n -->
                        <div class="data-card mt-6">
                            <h3 class="text-lg text-terminal-accent mb-3">üìã PROTOCOLOS DE EXTRACCI√ìN CR√çTICA</h3>
                            <div class="grid md:grid-cols-2 gap-4 text-sm">
                                <div>
                                    <p class="text-terminal-accent font-bold mb-2">FASES DE MISI√ìN:</p>
                                    <ul class="space-y-1">
                                        <li>‚Ä¢ <strong>Fase 1:</strong> Aproximaci√≥n y atraque (15 min m√°x.)</li>
                                        <li>‚Ä¢ <strong>Fase 2:</strong> Localizaci√≥n de Reynolds (30 min m√°x.)</li>
                                        <li>‚Ä¢ <strong>Fase 3:</strong> Carga de material (60 min m√°x.)</li>
                                        <li>‚Ä¢ <strong>Fase 4:</strong> Extracci√≥n inmediata (15 min m√°x.)</li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="text-error-color font-bold mb-2">ADVERTENCIAS CR√çTICAS:</p>
                                    <ul class="space-y-1 text-gray-300">
                                        <li>‚Ä¢ <span class="text-error-color">TIEMPO L√çMITE ABSOLUTO:</span> 2 horas</li>
                                        <li>‚Ä¢ <span class="text-yellow-400">Personal bajo estr√©s:</span> Manejar con cuidado</li>
                                        <li>‚Ä¢ <span class="text-terminal-accent">Material sensible:</span> Contenedores especiales</li>
                                        <li>‚Ä¢ <span class="text-error-color">Comunicaci√≥n m√≠nima:</span> Solo necesaria</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CONTENIDO SAMSA VI -->
                    <div id="samsa-content" class="mission-content hidden">
                        <!-- Header de Contenido Clasificado -->
                        <div class="p-6 border-2 border-terminal-accent bg-black shadow-lg shadow-terminal-accent/30 mb-6">
                        <div class="text-center mb-4">
                            <p class="text-3xl mb-2 text-terminal-accent font-bold">üîí BRIEFING CONFIDENCIAL üîí</p>
                            <p class="text-lg text-terminal-color">OPERACI√ìN: "SAMSA VI" - MISI√ìN DE RECONEXI√ìN</p>
                        </div>
                        
                        <div class="border-t border-terminal-accent pt-4">
                            <p class="text-sm text-terminal-color mb-2">
                                <span class="text-terminal-accent font-bold">C√ìDIGO DE MISI√ìN:</span> BRIEFING-180924609
                            </p>
                            <p class="text-sm text-terminal-color mb-2">
                                <span class="text-terminal-accent font-bold">CLASIFICACI√ìN:</span> 
                                <span class="text-terminal-accent">ACCESO RESTRINGIDO - EQUIPO ASIGNADO</span>
                            </p>
                            <p class="text-sm text-terminal-color mb-4">
                                <span class="text-terminal-accent font-bold">√öLTIMA ACTUALIZACI√ìN:</span> 2247.11.09 - 18:24:09
                            </p>
                        </div>
                    </div>

                    <!-- Datos de Intel -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Mapas y Esquemas -->
                        <div class="data-card">
                            <h3 class="text-xl text-terminal-accent mb-3 font-bold">ÔøΩÔ∏è MAPAS Y PLANOS</h3>
                            <div class="space-y-2 text-sm">
                                <a href="#" class="block text-terminal-color hover:text-terminal-accent underline">
                                    ‚Üí Planos completos de Greta Base
                                </a>
                                <a href="#" class="block text-terminal-color hover:text-terminal-accent underline">
                                    ‚Üí Topograf√≠a de Samsa VI (Sector de aterrizaje)
                                </a>
                                <a href="#" class="block text-terminal-color hover:text-terminal-accent underline">
                                    ‚Üí Rutas de evacuaci√≥n de emergencia
                                </a>
                                <div class="mt-4 p-2 border border-terminal-accent bg-terminal-accent/10">
                                    <p class="text-terminal-accent font-bold mb-1">üìÑ BRIEFING OFICIAL:</p>
                                    <a href="assets/briefing samsa vi.pdf" target="_blank" class="block text-terminal-color hover:text-terminal-accent underline">
                                        ‚Üí Briefing Detallado Samsa VI [PDF - CLASIFICADO]
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- Intel Confidencial -->
                        <div class="data-card border-terminal-accent">
                            <h3 class="text-xl text-terminal-accent mb-3 font-bold">ÔøΩ INTEL CONFIDENCIAL</h3>
                            <div class="space-y-3 text-sm">
                                <div class="p-2 border border-terminal-accent bg-black/50">
                                    <p class="text-terminal-accent font-bold mb-1">OBSERVACIONES PREVIAS:</p>
                                    <p class="text-terminal-color text-xs">
                                        Los √∫ltimos reportes mencionaron patrones inusuales en los datos de terraformaci√≥n. 
                                        El equipo cient√≠fico solicit√≥ an√°lisis adicionales antes del cese de comunicaciones.
                                    </p>
                                </div>
                                <div class="p-2 border border-terminal-accent bg-black/50">
                                    <p class="text-terminal-accent font-bold mb-1">PROTOCOLOS RECOMENDADOS:</p>
                                    <p class="text-terminal-color text-xs">
                                        <span class="text-terminal-accent font-bold">PRIORIDAD:</span> Personal clave. 
                                        Asegurar retorno seguro de Dr. Edem y n√∫cleo l√≥gico de Hinton si es necesario.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Personal de Greta Base -->
                    <div class="mt-6 p-4 border border-terminal-accent bg-black/30">
                        <h3 class="text-lg text-terminal-accent mb-3">üë• PERSONAL EN GRETA BASE</h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="space-y-2 text-xs">
                                <p class="text-terminal-accent font-bold">PERSONAL MILITAR:</p>
                                <p class="text-terminal-color">‚Ä¢ 2¬∫ Teniente Kaplan - Comandante del Pelot√≥n</p>
                                <p class="text-terminal-color">‚Ä¢ Marines de la Compa√±√≠a (cantidad desconocida)</p>
                                <p class="text-terminal-accent font-bold mt-3">PERSONAL CIENT√çFICO:</p>
                                <p class="text-terminal-color">‚Ä¢ Dr. Edem - Especialista de Misi√≥n <span class="text-terminal-accent">[CONTACTO CLAVE]</span></p>
                                <p class="text-terminal-color">‚Ä¢ Hinton - Oficial de Ciencia (Sint√©tico) <span class="text-terminal-accent">[ACTIVO IMPORTANTE]</span></p>
                            </div>
                            <div class="space-y-2 text-xs">
                                <p class="text-terminal-accent font-bold">PERSONAL T√âCNICO:</p>
                                <p class="text-terminal-color">‚Ä¢ Ingenieros de terraformaci√≥n</p>
                                <p class="text-terminal-color">‚Ä¢ T√©cnicos de comunicaciones</p>
                                <p class="text-terminal-color">‚Ä¢ Personal de mantenimiento</p>
                                <p class="text-gray-400 mt-2 italic">Total estimado: ~25 personas</p>
                            </div>
                        </div>
                    </div>

                    <!-- Logs del Sistema -->
                    <div class="mt-6 p-4 border border-dark-border bg-black/30">
                        <h3 class="text-lg text-terminal-accent mb-3">üìù COMUNICACIONES RECIENTES</h3>
                        <div class="text-xs text-terminal-color font-mono space-y-1">
                            <p>[2247.05.15 08:42:33] - <span class="text-terminal-accent">Greta Base:</span> "Muestras locales aseguradas para an√°lisis"</p>
                            <p>[2247.05.18 14:15:07] - <span class="text-terminal-accent">Dr. Edem:</span> "Anomal√≠as en los patrones de comportamiento detectadas"</p>
                            <p>[2247.05.20 22:30:45] - <span class="text-terminal-accent">2¬∫ Tte. Kaplan:</span> "Implementando protocolos de seguridad adicionales"</p>
                            <p>[2247.05.23 16:45:12] - <span class="text-error-color">√öLTIMA TRANSMISI√ìN:</span> "Mayday, mayday, requiero refuer--" [SE√ëAL PERDIDA]</p>
                            <p>[2247.05.23 16:45:13] - <span class="text-error-color">ERROR: Sin respuesta de Greta Base desde esta fecha</span></p>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="mt-6 pt-4 border-t border-dark-border text-center">
                        <p class="text-xs text-gray-500">
                            _Registro de acceso autorizado: Usuario <span id="current-user">SAMSA-6</span> | Sesi√≥n iniciada: <span id="session-time"></span>_
                        </p>
                        <p class="text-xs text-error-color mt-2">
                            Este terminal se desconectar√° autom√°ticamente en 15 minutos por seguridad.
                        </p>
                    </div>
                    </div> <!-- Fin samsa-content -->
                    </div> <!-- Fin ypsilon-content -->
                </div>
            </section>
        </main>
    </div>

    <!-- MODAL DE CONTRATO (Superposici√≥n) -->
    <div id="contract-modal" class="hidden fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-2">
        <!-- Contenedor del Modal con borde √ÅMBAR -->
        <div class="p-4 sm:p-6 md:p-8 w-full max-w-lg sm:max-w-2xl md:max-w-4xl lg:w-2/3 max-h-[90vh] overflow-y-auto bg-black border-2 sm:border-4 border-terminal-accent shadow-xl shadow-terminal-accent/50">
            <h3 id="modal-title" class="text-xl sm:text-2xl md:text-3xl mb-2 sm:mb-4 text-terminal-accent border-b border-dark-border pb-2"></h3>
            <p id="modal-details" class="mb-4 sm:mb-6 text-xs sm:text-sm"></p>

            <!-- Revelaci√≥n de Contrase√±a con borde √ÅMBAR -->
            <div id="password-reveal" class="hidden p-3 sm:p-4 bg-black border border-terminal-accent mb-4 sm:mb-6">
                <p class="text-sm sm:text-base md:text-lg text-terminal-color">CONTRATO ACEPTADO. SU C√ìDIGO DE ACCESO A TERMINAL ES:</p>
                <!-- Clave en color √ÅMBAR brillante -->
                <p id="contract-password" class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl text-terminal-accent font-bold my-2 sm:my-4 flicker text-center">SAMSA-6</p>
                <p class="text-xs sm:text-sm text-terminal-color">Use este c√≥digo en el portal [ TERMINAL ACCESS ].</p>
            </div>

            <div class="flex flex-col sm:flex-row justify-between gap-2 sm:gap-4 pt-4 border-t border-dark-border">
                <!-- Se agreg√≥ la clase btn-reject para el bot√≥n de rechazar -->
                <button id="reject-contract-btn" class="terminal-btn btn-reject w-full sm:w-auto">RECHAZAR / DECLINE</button>
                <button id="accept-contract-btn" class="terminal-btn w-full sm:w-auto">ACEPTAR / ACCEPT</button>
            </div>
        </div>
    </div>

    <!-- MODAL DE RECURSOS (Base de Datos) -->
    <div id="resource-modal" class="hidden fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-2">
        <div class="p-4 sm:p-6 md:p-8 w-full max-w-lg sm:max-w-2xl md:max-w-4xl lg:w-3/4 max-h-[90vh] overflow-y-auto bg-black border-2 sm:border-4 border-terminal-color shadow-xl shadow-terminal-color/50">
            <div class="flex justify-between items-center mb-4 sm:mb-6 border-b border-dark-border pb-2 sm:pb-4">
                <h3 id="resource-modal-title" class="text-lg sm:text-xl md:text-2xl text-terminal-accent"></h3>
                <button id="close-resource-modal" class="text-terminal-color hover:text-terminal-accent text-xl sm:text-2xl">‚úï</button>
            </div>
            <div id="resource-modal-content" class="text-xs sm:text-sm text-terminal-color"></div>
            <div class="mt-4 sm:mt-6 pt-4 border-t border-dark-border text-center">
                <button id="download-resource-btn" class="terminal-btn w-full sm:w-auto">DESCARGAR / ACCEDER</button>
            </div>
        </div>
    </div>

    <!-- Modal de nueva misi√≥n eliminado - ahora se crean autom√°ticamente con plantillas -->

    <!-- Modal de inventario eliminado - funcionalidad integrada en las pesta√±as del arsenal -->

    <script>
        // --- CONSTANTES Y ESTADO ---
        const SCREENS = document.querySelectorAll('.screen');
        const NAV_LINKS = document.querySelectorAll('.nav-link');
        const BOOT_SCREEN = document.getElementById('boot-screen');
        const APP_CONTAINER = document.getElementById('app-container');
        const ENTER_BTN = document.getElementById('enter-btn');
        const CONTRACT_ITEMS = document.querySelectorAll('.contract-item');
        const CONTRACT_MODAL = document.getElementById('contract-modal');
        const ACCEPT_CONTRACT_BTN = document.getElementById('accept-contract-btn');
        const REJECT_CONTRACT_BTN = document.getElementById('reject-contract-btn');
        const PASSWORD_REVEAL = document.getElementById('password-reveal');
        const MODAL_TITLE = document.getElementById('modal-title');
        const MODAL_DETAILS = document.getElementById('modal-details');

        const PASSWORD_INPUT = document.getElementById('password-input');
        const LOGIN_BTN = document.getElementById('login-btn');
        const LOGIN_MESSAGE = document.getElementById('login-message');
        const RESTRICTED_CONTENT = document.getElementById('restricted-content');

        // Mapeo de contrase√±as a tipos de misi√≥n (definido est√°ticamente para evitar errores de orden)
        const MISSION_PASSWORDS = {
            'YPS_14': 'ypsilon',
            'SAMSA-6': 'samsa'
        };

        // Mapeo de contratos a contrase√±as (se actualizar√° despu√©s de cargar CONTRACT_DATA)
        let CONTRACT_TO_PASSWORD = {};

        // --- GENERADOR AUTOM√ÅTICO DE CONTRATOS ---
        // Ver TEMPLATES.md para documentaci√≥n completa del sistema
        
        // Funciones auxiliares para generaci√≥n autom√°tica movidas a TEMPLATES.md

        // --- SISTEMA DE SONIDOS ---
        const AUDIO_CONTEXT = new (window.AudioContext || window.webkitAudioContext)();
        const SOUND_ENABLED = true;

        // --- SISTEMA DE AUDIO PARA MISIONES ---
        const MISSION_AUDIO_CACHE = new Map();
        const AUDIO_LOADER_QUEUE = [];
        let isLoadingAudio = false;

        // Configuraci√≥n de audios por misi√≥n
        const MISSION_AUDIO_CONFIG = {
            '0': {
                briefing: 'assets/audio/ypsilon_briefing.mp3',
                mother: 'assets/audio/mother_extraction.mp3'
            },
            '1': {
                briefing: 'assets/audio/samsa_briefing.mp3',
                mother: 'assets/audio/mother_warning.mp3'
            },
            '2': {
                briefing: 'assets/audio/corporate_briefing.mp3',
                mother: 'assets/audio/mother_analysis.mp3'
            },
            '3': {
                briefing: 'assets/audio/emergency_briefing.mp3',
                mother: 'assets/audio/mother_emergency.mp3'
            },
            '4': {
                briefing: 'assets/audio/investigation_briefing.mp3',
                mother: 'assets/audio/mother_investigation.mp3'
            }
        };

        // Generar sonidos sint√©ticos para diferentes acciones
        function createTone(frequency, duration, type = 'sine') {
            if (!SOUND_ENABLED) return;
            const oscillator = AUDIO_CONTEXT.createOscillator();
            const gainNode = AUDIO_CONTEXT.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(AUDIO_CONTEXT.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = type;
            
            gainNode.gain.setValueAtTime(0.1, AUDIO_CONTEXT.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.001, AUDIO_CONTEXT.currentTime + duration);
            
            oscillator.start(AUDIO_CONTEXT.currentTime);
            oscillator.stop(AUDIO_CONTEXT.currentTime + duration);
        }

        function playSystemSound(action) {
            switch(action) {
                case 'boot':
                    createTone(800, 0.1);
                    setTimeout(() => createTone(1000, 0.1), 100);
                    break;
                case 'navigate':
                    createTone(600, 0.05);
                    break;
                case 'success':
                    createTone(800, 0.1);
                    setTimeout(() => createTone(1200, 0.15), 80);
                    break;
                case 'error':
                    createTone(200, 0.2, 'square');
                    break;
                case 'warning':
                    createTone(400, 0.1);
                    setTimeout(() => createTone(400, 0.1), 120);
                    break;
                case 'typing':
                    createTone(1200, 0.02);
                    break;
                case 'button':
                    createTone(900, 0.08);
                    break;
                case 'modal':
                    createTone(600, 0.1);
                    setTimeout(() => createTone(900, 0.1), 60);
                    break;
            }
        }

        // --- FUNCIONES DE AUDIO PARA MISIONES ---

        function preloadAudio(src) {
            return new Promise((resolve, reject) => {
                if (MISSION_AUDIO_CACHE.has(src)) {
                    resolve(MISSION_AUDIO_CACHE.get(src));
                    return;
                }

                const audio = new Audio();
                
                audio.addEventListener('loadeddata', () => {
                    MISSION_AUDIO_CACHE.set(src, audio);
                    resolve(audio);
                });

                audio.addEventListener('error', (e) => {
                    // Crear audio sint√©tico como fallback
                    const synthAudio = createSyntheticAudio(src);
                    MISSION_AUDIO_CACHE.set(src, synthAudio);
                    resolve(synthAudio);
                });

                audio.preload = 'auto';
                audio.src = src;
                audio.load();
            });
        }

        function createSyntheticAudio(src) {
            // Crear audio sint√©tico basado en el tipo de archivo
            const isMother = src.includes('mother');
            const isBriefing = src.includes('briefing');
            
            return {
                play: () => {
                    if (isMother) {
                        // Sonido de IA MOTHER - tono bajo y modulado
                        createTone(300, 0.5, 'triangle');
                        setTimeout(() => createTone(250, 0.3, 'triangle'), 200);
                    } else if (isBriefing) {
                        // Sonido de briefing - tonos comunicaci√≥n
                        createTone(800, 0.2);
                        setTimeout(() => createTone(600, 0.3), 100);
                    }
                },
                pause: () => {},
                currentTime: 0,
                duration: 1,
                paused: true
            };
        }

        async function loadMissionAudio(missionId) {
            if (!MISSION_AUDIO_CONFIG[missionId]) return;

            const audioConfig = MISSION_AUDIO_CONFIG[missionId];
            const loadPromises = [];

            for (const [type, src] of Object.entries(audioConfig)) {
                loadPromises.push(preloadAudio(src));
            }

            try {
                await Promise.all(loadPromises);
                showNotification(`Audio de misi√≥n ${missionId} cargado`, 'success', 2000);
            } catch (error) {
                showNotification('Usando audio sint√©tico de respaldo', 'warning', 2000);
            }
        }

        function playMissionAudio(missionId, audioType = 'briefing') {
            const config = MISSION_AUDIO_CONFIG[missionId];
            if (!config || !config[audioType]) {
                showNotification('Audio no disponible', 'error', 2000);
                return;
            }

            const audioSrc = config[audioType];
            const audio = MISSION_AUDIO_CACHE.get(audioSrc);
            
            if (audio) {
                // Detener otros audios primero
                stopAllMissionAudio();
                
                audio.currentTime = 0;
                audio.play().catch(() => {
                    showNotification('Error reproduciendo audio', 'error', 2000);
                });

                showNotification(`Reproduciendo: ${audioType.toUpperCase()}`, 'info', 2000);
                playSystemSound('modal');
            } else {
                showNotification('Audio no cargado', 'error', 2000);
            }
        }

        function stopAllMissionAudio() {
            for (const audio of MISSION_AUDIO_CACHE.values()) {
                if (audio && !audio.paused) {
                    audio.pause();
                    audio.currentTime = 0;
                }
            }
        }

        // Funci√≥n createAudioPlayer eliminada - no utilizada (controles de audio integrados directamente en HTML)

        // --- DATOS EST√ÅTICOS ---

        // --- ELEMENTOS DE CARGA DEL SO ---
        const OS_LOADING_SCREEN = document.getElementById('os-loading-screen');
        const BOOT_CONSOLE = document.getElementById('boot-console');
        const OS_PROGRESS_BAR = document.getElementById('os-progress-bar');
        const OS_PROGRESS_TEXT = document.getElementById('os-progress-text');
        const BOOT_TIMESTAMP = document.getElementById('boot-timestamp');

        // --- SECUENCIA DE MENSAJES DE BOOT ---
        const BOOT_MESSAGES = [
            { text: "MOTHERSHIP OS v7.3.2 - Iniciando...", type: "normal", delay: 200 },
            { text: "[ OK ] Hardware: QNP-8500 | RAM: 2048TB", type: "success", delay: 150 },
            { text: "[ OK ] Protocolos de seguridad", type: "success", delay: 150 },
            { text: "[ OK ] M√≥dulos del sistema", type: "success", delay: 150 },
            { text: "[ WARN ] Actividad inusual - Sector 7", type: "warning", delay: 300 },
            { text: "[ OK ] Interfaz de usuario", type: "success", delay: 150 },
            { text: "[ ERROR ] Conexi√≥n perdida - Sevastopol", type: "error", delay: 300 },
            { text: "[ OK ] Protocolos de emergencia activos", type: "success", delay: 200 },
            { text: "Sistema operativo cargado. Bienvenido.", type: "success", delay: 400 }
        ];

        // --- DATOS DE CONTRATOS (Placeholder JSON) ---
        const CONTRACT_DATA = {
            '0': { 
                title: 'CORP-EXTR-Y14-Delta-7: Extracci√≥n Prioritaria Ypsilon-14', 
                details: 'Extracci√≥n prioritaria de material minado y transferencia de personal clave desde Asteroide Ypsilon-14. Divisi√≥n de Log√≠stica Corporativa requiere velocidad por encima de la precauci√≥n.',
                reward: '1 mes salario base + Stimpack + Escopeta de Combate (temporal)',
                region: 'Asteroide Ypsilon-14, Sector 47-Beta | Ing. Mike Reynolds',
                type: 'Extracci√≥n Prioritaria - Alpha-Cero',
                location: 'Asteroide Ypsilon-14',
                risk: 'EXTREMO',
                description: 'Recoger material minado de alta densidad y extraer al Ingeniero Mike Reynolds. Tiempo l√≠mite: 2 horas m√°ximo en sitio. Cualquier demora >2h ser√° considerada incumplimiento de contrato.',
                client: 'Mothership Corp. - Divisi√≥n Log√≠stica',
                status: 'active',
                priority: 1,
                password: 'YPS_14'
            },
            '1': { 
                title: 'BRIEFING 180924609: Samsa VI Recovery Operation', 
                details: `
                    <div class="space-y-4">
                        <div class="border border-terminal-accent p-3 bg-black/50">
                            <p class="text-terminal-accent font-bold mb-2">SITUACI√ìN:</p>
                            <p class="text-sm">La colonia de terraformaci√≥n Greta Base ha experimentado una interrupci√≥n en las comunicaciones. Se requiere equipo especializado para restablecer el contacto y evaluar el estado operacional.</p>
                        </div>

                        
                        <div class="border border-terminal-color p-3">
                            <p class="text-terminal-accent font-bold mb-2">OBJETIVOS PRINCIPALES:</p>
                            <ul class="text-sm space-y-1">
                                <li>‚Ä¢ Establecer contacto con el comandante local, 2¬∫ Teniente Kaplan</li>
                                <li>‚Ä¢ Restaurar sistemas de comunicaci√≥n y verificar estado del terraformador</li>
                                <li>‚Ä¢ Realizar evaluaci√≥n completa de las operaciones de la base</li>
                                <li>‚Ä¢ Asegurar continuidad del proyecto de terraformaci√≥n</li>
                                <li>‚Ä¢ Facilitar retorno del personal clave si es necesario</li>
                            </ul>
                        </div>


                        <div class="border border-terminal-color p-3">
                            <p class="text-terminal-accent font-bold mb-2">PROVISIONES POR MIEMBRO:</p>
                            <p class="text-sm">Dos (2) meses de salario, un (1) mes de pago por peligro, transporte ida/vuelta a Samsa VI, traje de peligro, SMG (3 cargadores), kit de primeros auxilios, stimpak.</p>
                        </div>

                        <div class="border border-terminal-accent p-3 mt-4">
                            <p class="text-terminal-accent font-bold mb-2">PERSONAL DE TRANSPORTE:</p>
                            <div class="text-xs space-y-1">
                                <p><strong>J2C-I Executive Transport:</strong></p>
                                <p>‚Ä¢ Maas - Enlace Corporativo</p>
                                <p>‚Ä¢ Anders - Piloto</p>
                                <p>‚Ä¢ Renfield - Copiloto</p>
                            </div>
                        </div>
                    </div>
                `,
                reward: '2 meses salario + bono de misi√≥n especializada + equipo completo',
                region: 'Planeta: Samsa VI | Poblaci√≥n: 25 (Sin contacto desde hace 6 meses)',
                type: 'Misi√≥n de Reconexi√≥n - Soporte T√©cnico',
                location: 'Samsa VI',
                risk: 'EXTREMO',
                description: 'Greta Base no responde desde hace 6 meses. Misi√≥n de recuperaci√≥n y evacuaci√≥n de personal esencial. Situaci√≥n de emergencia confirmada.',
                client: 'Mothership Corp.',
                status: 'active',
                priority: 2,
                password: 'SAMSA-6'
            },
            '2': { 
                title: 'MSN-2247-SEV: Sevastopol Medical Emergency', 
                details: 'Se recibi√≥ una S.O.S. desde la cubierta m√©dica de Sevastopol Station antes de que las comunicaciones se interrumpieran. Se requiere un equipo especialista para investigar la naturaleza de la emergencia m√©dica y prestar ayuda.',
                reward: '15.000‚Ç° + Horas',
                region: 'Cliente: Geoman Corp. | Tipo: Mantenimiento/M√©dica',
                type: 'Emergencia M√©dica',
                location: 'Sevastopol Station',
                risk: 'MEDIO',
                description: 'Emergencia m√©dica en estaci√≥n Sevastopol. Contrato ya asignado a otro equipo.',
                client: 'Geoman Corp.',
                status: 'inactive',
                priority: 10,
                password: null
            },
            '3': { 
                title: 'MSN-2247-F161: Fury Extermination', 
                details: 'La instalaci√≥n penitenciaria abandonada Fiorina en Fury 161 necesita ser despejada para su desmantelamiento. Los informes indican una infestaci√≥n persistente. Los protocolos est√°ndar de "control de plagas" est√°n en vigor. Se requiere la eliminaci√≥n de toda la vida biol√≥gica no autorizada.',
                reward: '22.000‚Ç° + Prima',
                region: 'Cliente: U.S. Colonial Admin. | Tipo: Seguridad/Eliminaci√≥n',
                type: 'Descontaminaci√≥n',
                location: 'Fiorina-161',
                risk: 'ALTO',
                description: 'Descontaminaci√≥n de prisi√≥n Fiorina-161. Operaci√≥n en progreso desde hace 2 semanas.',
                client: 'U.S. Colonial Admin.',
                status: 'inactive',
                priority: 11,
                password: null
            },
            '4': { 
                title: 'MSN-2247-SCY: Operation "Scythe"', 
                details: 'La plataforma minera "Scythe" est√° abandonada y debe ser desmantelada remotamente. Se requiere un equipo en tierra para instalar explosivos. Se reportaron rumores de una "infecci√≥n". Mothership Command niega cualquier riesgo biol√≥gico.',
                reward: '45.000‚Ç° + Bonos',
                region: 'Cliente: Mothership Command - Riesgos | Tipo: Eliminaci√≥n (Alto Riesgo)',
                type: 'Desmantelamiento Remoto',
                location: 'Plataforma Scythe',
                risk: 'EXTREMO',
                description: 'Desmantelamiento remoto de plataforma minera. Equipo de √©lite desplegado hace 1 mes.',
                client: 'Mothership Command - Riesgos',
                status: 'inactive',
                priority: 12,
                password: null
            }
        };

        // Actualizar mapeo de contratos a contrase√±as despu√©s de definir CONTRACT_DATA
        CONTRACT_TO_PASSWORD = {};
        Object.keys(CONTRACT_DATA).forEach(id => {
            const contract = CONTRACT_DATA[id];
            if (contract.password) {
                CONTRACT_TO_PASSWORD[id] = contract.password;
            }
        });

        let selectedContractId = null;

        // --- FUNCIONES PARA MISIONES DIN√ÅMICAS ---
        function createMissionCard(id, data, isActive = true) {
            const statusClass = isActive ? 'border-terminal-accent' : 'opacity-60';
            const statusText = isActive ? 'ACTIVO' : 'EN CURSO';
            const statusColor = isActive ? 'text-terminal-accent' : 'text-gray-500';
            
            return `
                <div class="contract-item data-card relative ${statusClass} smooth-transition" data-id="${id}">
                    <div class="flex justify-between items-start mb-2">
                        <p class="text-2xl ${isActive ? 'text-terminal-accent' : 'text-gray-400'} font-bold">${data.title}</p>
                        <div class="flex items-center gap-2">
                            <span class="text-xs ${statusColor} border ${isActive ? 'border-terminal-accent' : 'border-gray-500'} px-2 py-1 font-bold">${statusText}</span>

                        </div>
                    </div>
                    <div class="grid md:grid-cols-4 gap-3 mb-3">
                        <div>
                            <p class="text-xs text-gray-400">CLIENTE</p>
                            <p class="text-sm ${isActive ? 'text-terminal-color' : 'text-gray-400'}">${data.client || 'Mothership Corp.'}</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-400">COMPENSACI√ìN</p>
                            <p class="text-sm ${isActive ? 'text-terminal-accent' : 'text-gray-400'} font-bold">${data.reward}</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-400">UBICACI√ìN</p>
                            <p class="text-sm ${isActive ? 'text-terminal-color' : 'text-gray-400'}">${data.location || 'Desconocido'}</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-400">RIESGO</p>
                            <p class="text-sm ${isActive ? 'text-terminal-color' : 'text-gray-400'}">${data.risk || 'MEDIO'}</p>
                        </div>
                    </div>
                    <p class="text-sm ${isActive ? 'text-terminal-color' : 'text-gray-400'} mb-2">
                        ${data.description || 'Descripci√≥n no disponible'}
                    </p>
                    <div class="flex justify-between items-center">
                        <span class="text-xs ${data.risk === 'EXTREMO' ? 'text-error-color danger-text' : isActive ? 'text-terminal-color' : 'text-gray-500'} font-bold">
                            NIVEL DE RIESGO: ${data.risk || 'MEDIO'}
                        </span>
                        <span class="text-xs ${isActive ? 'text-terminal-accent hover:text-white' : 'text-gray-500'} cursor-pointer font-bold">
                            ${isActive ? '‚Üí VER BRIEFING COMPLETO' : '‚Üí NO DISPONIBLE'}
                        </span>
                    </div>
                </div>
            `;
        }



        function renderAllMissions() {
            const contractList = document.getElementById('contract-list');
            contractList.innerHTML = '';
            

            
            // Renderizar misiones ordenadas por prioridad (menor n√∫mero = mayor prioridad)
            const sortedIds = Object.keys(CONTRACT_DATA).sort((a, b) => {
                const dataA = CONTRACT_DATA[a];
                const dataB = CONTRACT_DATA[b];
                
                // Ordenar por prioridad (n√∫meros menores primero)
                const priorityA = dataA.priority || 999;
                const priorityB = dataB.priority || 999;
                
                if (priorityA !== priorityB) {
                    return priorityA - priorityB;
                }
                
                // Si tienen la misma prioridad, ordenar por ID
                return parseInt(a) - parseInt(b);
            });
            
            sortedIds.forEach(id => {
                const data = CONTRACT_DATA[id];
                if (data) {
                    const isActive = data.status === 'active';
                    const missionHTML = createMissionCard(id, data, isActive);
                    contractList.insertAdjacentHTML('beforeend', missionHTML);
                }
            });
            
            // A√±adir event listeners a todas las misiones
            contractList.querySelectorAll('.contract-item').forEach(item => {
                item.addEventListener('click', handleContractClick);
            });
        }



        function showNotification(message, type = 'info', duration = 3000) {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 border-2 bg-black z-50 smooth-transition ${
                type === 'success' ? 'border-terminal-accent text-terminal-accent' :
                type === 'error' ? 'border-error-color text-error-color' :
                type === 'warning' ? 'border-yellow-500 text-yellow-400' :
                'border-terminal-color text-terminal-color'
            }`;
            
            // A√±adir icono seg√∫n el tipo
            const icon = type === 'success' ? '‚úì' : type === 'error' ? '‚úó' : type === 'warning' ? '‚ö†' : '‚Ñπ';
            notification.innerHTML = `<span class="mr-2">${icon}</span>${message}`;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 300);
            }, duration);
        }

        // Mostrar estado de almacenamiento cuando se cargue la p√°gina
        function showStorageStatus() {
            try {
                const usage = JSON.stringify({
                    missions: Object.keys(CONTRACT_DATA).length - 4 // Solo las originales est√°n disponibles
                });
            } catch (error) {
                showNotification('Error mostrando estado de almacenamiento', 'error');
            }
        }



        // --- FUNCIONES DE CARGA DEL SO ---
        
        function startOSLoading() {
            // Mostrar pantalla de carga del SO
            OS_LOADING_SCREEN.classList.remove('hidden');
            BOOT_SCREEN.classList.add('hidden');
            
            // Establecer timestamp
            const now = new Date();
            BOOT_TIMESTAMP.textContent = now.toLocaleString('es-ES');
            
            // Limpiar consola
            BOOT_CONSOLE.innerHTML = '';
            OS_PROGRESS_BAR.style.width = '0%';
            OS_PROGRESS_TEXT.textContent = '0%';
            
            // Ejecutar secuencia de boot
            executeBootSequence();
        }

        function executeBootSequence() {
            let messageIndex = 0;
            let progress = 0;
            const totalMessages = BOOT_MESSAGES.length;

            function showNextMessage() {
                if (messageIndex < BOOT_MESSAGES.length) {
                    const message = BOOT_MESSAGES[messageIndex];
                    
                    // Crear elemento del mensaje
                    const messageElement = document.createElement('div');
                    messageElement.className = `boot-message ${message.type === 'error' ? 'boot-error' : 
                                                              message.type === 'success' ? 'boot-success' : 
                                                              message.type === 'warning' ? 'boot-warning' : ''}`;
                    messageElement.textContent = message.text || ' ';
                    
                    // A√±adir a la consola
                    BOOT_CONSOLE.appendChild(messageElement);
                    
                    // Scroll autom√°tico
                    BOOT_CONSOLE.scrollTop = BOOT_CONSOLE.scrollHeight;
                    
                    // Actualizar progreso
                    progress = Math.round((messageIndex + 1) / totalMessages * 100);
                    OS_PROGRESS_BAR.style.width = progress + '%';
                    OS_PROGRESS_TEXT.textContent = progress + '%';
                    
                    // Efecto de sonido visual para errores
                    if (message.type === 'error') {
                        document.body.style.background = '#330000';
                        setTimeout(() => {
                            document.body.style.background = '';
                        }, 100);
                    }
                    
                    messageIndex++;
                    
                    // Programar siguiente mensaje
                    if (messageIndex < BOOT_MESSAGES.length) {
                        setTimeout(showNextMessage, message.delay);
                    } else {
                        // Secuencia completada
                        setTimeout(completeBootSequence, 1000);
                    }
                }
            }

            // Iniciar secuencia
            showNextMessage();
        }

        function completeBootSequence() {
            // Mensaje final
            const finalMessage = document.createElement('div');
            finalMessage.className = 'boot-message boot-success text-center text-lg';
            finalMessage.innerHTML = '<br>>>> SISTEMA OPERATIVO CARGADO EXITOSAMENTE <<<<br>>> INICIANDO INTERFAZ DE USUARIO... <<<';
            BOOT_CONSOLE.appendChild(finalMessage);
            
            // Scroll final
            BOOT_CONSOLE.scrollTop = BOOT_CONSOLE.scrollHeight;
            
            // Transici√≥n a la aplicaci√≥n principal
            setTimeout(() => {
                OS_LOADING_SCREEN.classList.add('opacity-0');
                
                setTimeout(() => {
                    OS_LOADING_SCREEN.classList.add('hidden');
                    APP_CONTAINER.classList.remove('hidden');
                    showScreen('landing');
                    addTypingEffect();
                }, 800);
            }, 1000);
        }

        // --- FUNCIONES DE NAVEGACI√ìN ---

        // Funci√≥n para cambiar la pantalla activa con sonidos y animaciones mejoradas
        function showScreen(targetId) {
            playSystemSound('navigate');
            
            SCREENS.forEach(screen => {
                screen.classList.add('hidden');
                if (screen.id === targetId) {
                    screen.classList.remove('hidden');
                    screen.classList.add('slide-in');
                    // Remover la clase despu√©s de la animaci√≥n
                    setTimeout(() => screen.classList.remove('slide-in'), 500);
                }
            });
            
            // Resaltar el enlace de navegaci√≥n activo con smooth transitions
            NAV_LINKS.forEach(link => {
                link.classList.remove('active');
                link.classList.add('smooth-transition');
                if (link.dataset.screen === targetId) {
                    link.classList.add('active');
                }
            });


        }

        // --- EVENT HANDLERS ---

        // 1. Manejar la pantalla de arranque con efectos de carga y sonidos
        ENTER_BTN.addEventListener('click', () => {
            playSystemSound('boot');
            
            // Deshabilitar el bot√≥n inmediatamente
            ENTER_BTN.disabled = true;
            ENTER_BTN.style.cursor = 'not-allowed';
            ENTER_BTN.style.opacity = '0.7';

            // Iniciar secuencia de carga
            const loadingFill = document.querySelector('.loading-fill');
            const steps = [
                { width: '33%', text: 'VERIFICANDO...', time: 300 },
                { width: '66%', text: 'CONECTANDO...', time: 600 },
                { width: '100%', text: 'ACCESO AUTORIZADO', time: 900 }
            ];

            let currentStep = 0;

            function executeStep() {
                if (currentStep < steps.length) {
                    const step = steps[currentStep];
                    
                    // Actualizar barra de progreso
                    if (loadingFill) {
                        loadingFill.style.width = step.width;
                    }
                    
                    // Actualizar texto del bot√≥n
                    ENTER_BTN.textContent = step.text;
                    
                    // Efecto de parpadeo en el √∫ltimo paso
                    if (currentStep === steps.length - 1) {
                        ENTER_BTN.classList.add('flicker');
                        ENTER_BTN.style.color = 'var(--terminal-accent)';
                        ENTER_BTN.style.borderColor = 'var(--terminal-accent)';
                    }
                    
                    currentStep++;
                    
                    // Programar el siguiente paso
                    if (currentStep < steps.length) {
                        setTimeout(executeStep, step.time - (steps[currentStep - 1]?.time || 0));
                    } else {
                        // √öltimo paso: iniciar carga del SO
                        setTimeout(() => {
                            startOSLoading();
                        }, 400);
                    }
                }
            }

            // Iniciar la secuencia
            executeStep();
        });

        // 2. Manejar la navegaci√≥n principal con sonidos y animaciones
        NAV_LINKS.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault(); 
                const target = e.target.dataset.screen;
                if (target) {
                    showScreen(target);
                }
            });
            
            // A√±adir efectos hover con sonido
            link.addEventListener('mouseenter', () => {
                playSystemSound('typing');
            });
        });

        // 3. Funci√≥n para manejar clics en contratos
        function handleContractClick(e) {
            playSystemSound('modal');
            let id = e.currentTarget.dataset.id;
            selectedContractId = id;
            const data = CONTRACT_DATA[id];

            if (!data) return; // Prevenir errores si no existe data

            // Rellenar el modal
            MODAL_TITLE.textContent = data.title;
            MODAL_DETAILS.innerHTML = `
                <p class="text-terminal-accent mb-2">${data.reward}</p>
                <p class="text-terminal-color mb-4">${data.region}</p>
                <div class="border-t border-b border-dark-border py-4">${data.details}</div>
            `;

            // Resetear estado del modal
            PASSWORD_REVEAL.classList.add('hidden');
            ACCEPT_CONTRACT_BTN.classList.remove('hidden');
            REJECT_CONTRACT_BTN.classList.remove('hidden');

            // Mostrar modal
            CONTRACT_MODAL.classList.remove('hidden');
        }

        // Aplicar event listeners a contratos existentes
        CONTRACT_ITEMS.forEach(item => {
            item.addEventListener('click', handleContractClick);
        });

        // 4. Manejar bot√≥n "Aceptar Contrato"
        ACCEPT_CONTRACT_BTN.addEventListener('click', () => {
            playSystemSound('success');
            
            // Actualizar la contrase√±a mostrada seg√∫n el contrato seleccionado
            const contractPassword = CONTRACT_TO_PASSWORD[selectedContractId] || 'UNKNOWN';
            const passwordElement = document.getElementById('contract-password');
            if (passwordElement) {
                passwordElement.textContent = contractPassword;
            }
            
            PASSWORD_REVEAL.classList.remove('hidden');
            ACCEPT_CONTRACT_BTN.classList.add('hidden');
            REJECT_CONTRACT_BTN.textContent = 'CERRAR / CLOSE';
            REJECT_CONTRACT_BTN.classList.remove('btn-reject');
            REJECT_CONTRACT_BTN.classList.add('terminal-btn');
        });

        // 5. Manejar bot√≥n "Rechazar/Cerrar"
        REJECT_CONTRACT_BTN.addEventListener('click', () => {
            CONTRACT_MODAL.classList.add('hidden');
            // Restablecer el texto y el estilo del bot√≥n por si se us√≥ como bot√≥n de cerrar
            REJECT_CONTRACT_BTN.textContent = 'RECHAZAR / DECLINE';
            REJECT_CONTRACT_BTN.classList.add('btn-reject');
        });

        // 6. Manejar el login del Terminal Restringido
        let loginAttempts = 3;

        LOGIN_BTN.addEventListener('click', () => {
            const enteredPassword = PASSWORD_INPUT.value.toUpperCase().trim();
            
            // Limpiar y resetear el estilo del mensaje
            LOGIN_MESSAGE.textContent = '';
            LOGIN_MESSAGE.classList.remove('text-terminal-color', 'text-red-500', 'flicker');

            const missionType = MISSION_PASSWORDS[enteredPassword];
            
            if (missionType) {
                // Acceso exitoso
                const missionNames = {
                    'samsa': 'SAMSA VI',
                    'ypsilon': 'YPSILON-14'
                };
                
                LOGIN_MESSAGE.textContent = `ACCESO CONCEDIDO. CARGANDO INTEL ${missionNames[missionType]}...`;
                LOGIN_MESSAGE.classList.add('text-terminal-color', 'flicker');
                
                // Simular tiempo de carga
                LOGIN_BTN.textContent = 'CARGANDO...';
                LOGIN_BTN.disabled = true;
                
                setTimeout(() => {
                    // Ocultar formulario de login
                    const loginForm = document.getElementById('login-form');
                    loginForm.classList.add('hidden');
                    
                    // Mostrar contenido restringido
                    RESTRICTED_CONTENT.classList.remove('hidden');
                    
                    // Mostrar contenido espec√≠fico seg√∫n la misi√≥n
                    const ypsContent = document.getElementById('ypsilon-content');
                    const samsaContent = document.getElementById('samsa-content');
                    const currentUserSpan = document.getElementById('current-user');
                    
                    if (missionType === 'ypsilon') {
                        if (ypsContent) ypsContent.classList.remove('hidden');
                        if (samsaContent) samsaContent.classList.add('hidden');
                        if (currentUserSpan) currentUserSpan.textContent = 'YPS_14';
                        loadMissionAudio('0'); // Ypsilon-14
                    } else if (missionType === 'samsa') {
                        if (samsaContent) samsaContent.classList.remove('hidden');
                        if (ypsContent) ypsContent.classList.add('hidden');
                        if (currentUserSpan) currentUserSpan.textContent = 'SAMSA-6';
                        loadMissionAudio('1'); // Samsa VI
                    }
                    
                    // Agregar timestamp de sesi√≥n
                    const sessionTime = new Date().toLocaleTimeString();
                    const sessionTimeElement = document.getElementById('session-time');
                    if (sessionTimeElement) {
                        sessionTimeElement.textContent = sessionTime;
                    }
                    
                    // Scroll suave hacia el contenido
                    RESTRICTED_CONTENT.scrollIntoView({ behavior: 'smooth' });
                    playTerminalSound('success');
                }, 1500);
                
            } else {
                // Acceso fallido
                loginAttempts--;
                const attemptsElement = document.getElementById('attempts-remaining');
                if (attemptsElement) {
                    attemptsElement.textContent = loginAttempts;
                }
                
                if (loginAttempts > 0) {
                    LOGIN_MESSAGE.textContent = `C√ìDIGO INV√ÅLIDO. INTENTOS RESTANTES: ${loginAttempts}. [ PROTOCOL 3 ENGAGED ]`;
                    LOGIN_MESSAGE.classList.add('text-red-500', 'flicker');
                } else {
                    LOGIN_MESSAGE.textContent = 'ACCESO BLOQUEADO. CONTACTE CON ADMINISTRADOR DEL SISTEMA.';
                    LOGIN_MESSAGE.classList.add('text-red-500', 'danger-text');
                    LOGIN_BTN.textContent = 'ACCESO BLOQUEADO';
                    LOGIN_BTN.disabled = true;
                    LOGIN_BTN.style.opacity = '0.5';
                    PASSWORD_INPUT.disabled = true;
                }
                
                RESTRICTED_CONTENT.classList.add('hidden');
                playTerminalSound('error');
            }
            PASSWORD_INPUT.value = ''; // Limpiar campo
        });

        // 7. Permitir 'Enter' en el input para el login
        PASSWORD_INPUT.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                LOGIN_BTN.click();
            }
        });

        // 7.5. Manejar bot√≥n "Volver al Men√∫ Principal"
        const BACK_TO_MENU_BTN = document.getElementById('back-to-menu-btn');
        if (BACK_TO_MENU_BTN) {
            BACK_TO_MENU_BTN.addEventListener('click', () => {
                // Ocultar contenido restringido
                RESTRICTED_CONTENT.classList.add('hidden');
                
                // Mostrar formulario de login nuevamente
                const loginForm = document.getElementById('login-form');
                loginForm.classList.remove('hidden');
                
                // Resetear formulario
                PASSWORD_INPUT.value = '';
                LOGIN_MESSAGE.textContent = '';
                LOGIN_MESSAGE.className = 'mt-4 text-sm text-center min-h-[20px]';
                LOGIN_BTN.textContent = 'AUTENTICAR [ EXEC ]';
                LOGIN_BTN.disabled = false;
                PASSWORD_INPUT.disabled = false;
                LOGIN_BTN.style.opacity = '1';
                
                // Resetear intentos
                loginAttempts = 3;
                const attemptsElement = document.getElementById('attempts-remaining');
                if (attemptsElement) {
                    attemptsElement.textContent = loginAttempts;
                }
                
                // Navegar a la p√°gina de inicio
                showScreen('landing');
                playSystemSound('success');
            });
        }

        // 8. Event Listeners para Nuevas Funcionalidades

        // Sistema de gesti√≥n de misiones obsoleto eliminado - ahora se usan plantillas autom√°ticas

        // 9. Funci√≥n para agregar efecto de escritura
        function addTypingEffect() {
            const elements = document.querySelectorAll('.typewriter');
            elements.forEach((el, index) => {
                setTimeout(() => {
                    el.style.animation = 'typewriter 2s steps(40, end), blinkCursor 0.75s step-end infinite';
                }, index * 500);
            });
        }

        // 10. Funci√≥n para agregar efectos de sonido visuales (compatibilidad)
        function playTerminalSound(type) {
            // Usar el nuevo sistema de sonido
            playSystemSound(type);
            
            const soundIndicator = document.createElement('div');
            soundIndicator.className = 'fixed top-4 right-4 text-xs text-terminal-accent bg-black border border-terminal-accent px-2 py-1 z-50';
            soundIndicator.textContent = type === 'success' ? '‚ô™ BEEP' : '‚ô™ ERROR';
            document.body.appendChild(soundIndicator);
            
            setTimeout(() => {
                soundIndicator.remove();
            }, 1000);
        }

        // 11. Mejorar navegaci√≥n con efectos (ya implementado arriba)
        // Esta funcionalidad se movi√≥ al event listener principal de navegaci√≥n

        // 12. Sistema de inventario simplificado
        function showInventoryTab(tabName) {
            // Ocultar todos los paneles
            document.querySelectorAll('.inventory-panel').forEach(panel => {
                panel.classList.add('hidden');
            });
            
            // Resetear estilos de todas las pesta√±as
            document.querySelectorAll('.inventory-tab').forEach(tab => {
                tab.classList.remove('text-error-color', 'text-terminal-accent', 'text-terminal-color', 'border-error-color', 'border-terminal-accent', 'border-terminal-color');
                tab.classList.add('text-gray-400', 'border-transparent');
            });
            
            // Mostrar panel seleccionado y activar pesta√±a
            const activePanel = document.getElementById(tabName + '-panel');
            const activeTab = document.getElementById(tabName + '-tab');
            
            if (activePanel) {
                activePanel.classList.remove('hidden');
            }
            
            // Aplicar estilos seg√∫n el tipo
            if (activeTab) {
                activeTab.classList.remove('text-gray-400', 'border-transparent');
                if (tabName === 'weapons') {
                    activeTab.classList.add('text-error-color', 'border-error-color');
                } else if (tabName === 'armor') {
                    activeTab.classList.add('text-terminal-accent', 'border-terminal-accent');
                } else if (tabName === 'items') {
                    activeTab.classList.add('text-terminal-color', 'border-terminal-color');
                }
            }
            
            // Cargar datos si no est√°n cargados
            const dataContainer = document.getElementById(tabName + '-data');
            if (dataContainer && dataContainer.innerHTML.includes('Cargando')) {
                loadInventoryData(tabName);
            }
        }

        function loadInventoryData(type) {
            const fileName = getCSVFileName(type);
            
            fetch(`assets/${fileName}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Error de red');
                    }
                    return response.text();
                })
                .then(csvText => {
                    const data = parseCSV(csvText);
                    fillInventoryTable(type, data);
                })
                .catch(error => {
                    const dataContainer = document.getElementById(type + '-data');
                    if (dataContainer) {
                        dataContainer.innerHTML = `
                            <tr><td colspan="7" class="text-center text-error-color p-4">
                                ‚ö†Ô∏è Error cargando datos: ${error.message}
                            </td></tr>
                        `;
                    }
                });
        }

        function getCSVFileName(type) {
            const fileMap = {
                'weapons': 'Armas.csv',
                'armor': 'Armaduras.csv', 
                'items': 'Items.csv'
            };
            return fileMap[type] || '';
        }

        function parseCSV(csvText) {
            const lines = csvText.trim().split('\n');
            if (lines.length < 2) return [];
            
            const headers = lines[0].split(',').map(h => h.trim());
            const data = [];
            
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                const values = parseCSVLine(line);
                const item = {};
                
                headers.forEach((header, index) => {
                    item[header] = values[index] ? values[index].trim().replace(/^"|"$/g, '') : '';
                });
                
                data.push(item);
            }
            
            return data;
        }

        function parseCSVLine(line) {
            const result = [];
            let current = '';
            let inQuotes = false;
            
            for (let i = 0; i < line.length; i++) {
                const char = line[i];
                
                if (char === '"') {
                    inQuotes = !inQuotes;
                } else if (char === ',' && !inQuotes) {
                    result.push(current);
                    current = '';
                } else {
                    current += char;
                }
            }
            
            result.push(current);
            return result;
        }

        function fillInventoryTable(type, data) {
            const container = document.getElementById(type + '-data');
            if (!container) return;
            
            if (type === 'weapons') {
                container.innerHTML = data.map(item => `
                    <tr class="border-b border-gray-700 hover:bg-red-900/20 transition-colors">
                        <td class="p-3 text-error-color font-bold">${item['Arma (WEAPON)'] || ''}</td>
                        <td class="p-3 text-center text-terminal-accent">${item['Coste (COST)'] || ''}</td>
                        <td class="p-3 text-center text-terminal-color">${item['Alcance (RANGE)'] || ''}</td>
                        <td class="p-3 text-center text-error-color font-bold">${item['Da√±o (DAMAGE)'] || ''}</td>
                        <td class="p-3 text-center text-terminal-color">${item['Disparos (SHOTS)'] || ''}</td>
                        <td class="p-3 text-center text-terminal-color">${item['Herida (WOUND)'] || ''}</td>
                        <td class="p-3 text-yellow-400 text-xs">${item['Especial (SPECIAL)'] || ''}</td>
                    </tr>
                `).join('');
            } else if (type === 'armor') {
                container.innerHTML = data.map(item => `
                    <tr class="border-b border-gray-700 hover:bg-blue-900/20 transition-colors">
                        <td class="p-3 text-terminal-accent font-bold">${item['Armadura (ARMOR)'] || ''}</td>
                        <td class="p-3 text-center text-terminal-accent">${item['Coste (COST)'] || ''}</td>
                        <td class="p-3 text-center text-terminal-accent font-bold">${item['PA (AP)'] || ''}</td>
                        <td class="p-3 text-center text-terminal-color">${item['O2 (02)'] || ''}</td>
                        <td class="p-3 text-center text-terminal-color">${item['Velocidad (SPEED)'] || ''}</td>
                        <td class="p-3 text-terminal-color text-xs">${item['Especial (SPECIAL)'] || ''}</td>
                    </tr>
                `).join('');
            } else if (type === 'items') {
                container.innerHTML = data.map(item => `
                    <tr class="border-b border-gray-700 hover:bg-green-900/20 transition-colors">
                        <td class="p-3 text-terminal-color font-bold">${item['√çtem (ITEM)'] || ''}</td>
                        <td class="p-3 text-center text-terminal-accent">${item['Coste (COST)'] || ''}</td>
                        <td class="p-3 text-terminal-color text-xs leading-relaxed">${item['Descripci√≥n (DESCRIPTION)'] || ''}</td>
                    </tr>
                `).join('');
            }
        }



        // 13. Agregar timestamps din√°micos
        function updateTimestamp() {
            const now = new Date();
            const starDate = `${2247 + Math.floor(now.getMonth() / 12)}.${String(now.getMonth() + 1).padStart(2, '0')}.${String(now.getDate()).padStart(2, '0')}`;
            const timestampElements = document.querySelectorAll('[data-timestamp]');
            timestampElements.forEach(el => {
                el.textContent = el.textContent.replace(/\d{4}\.\d{2}\.\d{2}/, starDate);
            });
        }

        // 13. Gesti√≥n del modal de recursos
        const RESOURCE_MODAL = document.getElementById('resource-modal');
        const RESOURCE_MODAL_TITLE = document.getElementById('resource-modal-title');
        const RESOURCE_MODAL_CONTENT = document.getElementById('resource-modal-content');
        const CLOSE_RESOURCE_MODAL = document.getElementById('close-resource-modal');
        const DOWNLOAD_RESOURCE_BTN = document.getElementById('download-resource-btn');

        const RESOURCE_DATA = {
            'survival': {
                title: 'üìã Gu√≠a de Supervivencia Oficial',
                content: `
                    <div class="space-y-4">
                        <p class="text-terminal-accent font-bold">MANUAL DE SUPERVIVENCIA MOTHERSHIP v7.3.2</p>
                        <div class="border border-dark-border p-4">
                            <p class="text-terminal-color mb-2"><strong>Cap√≠tulos Incluidos:</strong></p>
                            <ul class="list-disc list-inside space-y-1 text-sm text-terminal-color">
                                <li>Protocolo de Emergencia en Espacios Confinados</li>
                                <li>Procedimientos de Descompresi√≥n</li>
                                <li>Primeros Auxilios en Gravedad Cero</li>
                                <li>Identificaci√≥n de Amenazas Biol√≥gicas</li>
                                <li>Comunicaciones de Emergencia</li>
                                <li>Procedimientos de Evacuaci√≥n</li>
                            </ul>
                        </div>
                        <p class="text-xs text-gray-400">
                            ‚ö†Ô∏è Documento confidencial. Solo para uso autorizado por contratistas activos.
                        </p>
                    </div>
                `,
                action: 'DESCARGAR PDF'
            },
            'cheatsheet': {
                title: 'üéØ Cheatsheet de Mec√°nicas',
                content: `
                    <div class="space-y-4">
                        <p class="text-terminal-accent font-bold">REFERENCIA R√ÅPIDA DE JUEGO</p>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="border border-dark-border p-3">
                                <p class="text-terminal-color font-bold mb-2">Tiradas B√°sicas:</p>
                                <p class="text-xs text-terminal-color">‚Ä¢ Stat Check: d100 ‚â§ Stat</p>
                                <p class="text-xs text-terminal-color">‚Ä¢ Save: d100 ‚â§ Save</p>
                                <p class="text-xs text-terminal-color">‚Ä¢ Skill Check: 2d10 + Skill</p>
                            </div>
                            <div class="border border-dark-border p-3">
                                <p class="text-terminal-color font-bold mb-2">P√°nico:</p>
                                <p class="text-xs text-terminal-color">‚Ä¢ Stress: d10 + Stress Level</p>
                                <p class="text-xs text-terminal-color">‚Ä¢ Panic: 2d10 + Panic Rating</p>
                                <p class="text-xs text-terminal-color">‚Ä¢ Critical Stress: 2d10</p>
                            </div>
                        </div>
                        <div class="border border-dark-border p-3">
                            <p class="text-terminal-color font-bold mb-2">Combate:</p>
                            <p class="text-xs text-terminal-color">‚Ä¢ Initiative: Speed Check</p>
                            <p class="text-xs text-terminal-color">‚Ä¢ Attack: Combat + 2d10</p>
                            <p class="text-xs text-terminal-color">‚Ä¢ Damage: Weapon + Dmg Bonus</p>
                        </div>
                    </div>
                `,
                action: 'DESCARGAR CHEATSHEET'
            },
            'app': {
                title: 'üì± Companion App V2.1',
                content: `
                    <div class="space-y-4">
                        <p class="text-terminal-accent font-bold">HERRAMIENTA DIGITAL OFICIAL</p>
                        <div class="border border-dark-border p-4">
                            <p class="text-terminal-color mb-2"><strong>Funcionalidades:</strong></p>
                            <ul class="list-disc list-inside space-y-1 text-sm text-terminal-color">
                                <li>Generador autom√°tico de personajes</li>
                                <li>Gesti√≥n de inventario y equipo</li>
                                <li>Calculadora de estr√©s y p√°nico</li>
                                <li>Base de datos de naves y m√≥dulos</li>
                                <li>Generador de misiones aleatorias</li>
                                <li>Sincronizaci√≥n con Roll20 y Foundry VTT</li>
                            </ul>
                        </div>
                        <div class="p-3 bg-black border border-terminal-accent">
                            <p class="text-terminal-accent text-sm">
                                üåê Aplicaci√≥n web multiplataforma<br>
                                üì± Compatible con dispositivos m√≥viles<br>
                                üîÑ Actualizaciones autom√°ticas
                            </p>
                        </div>
                    </div>
                `,
                action: 'ACCEDER A LA APP'
            },
            'video': {
                title: 'üé• Tutorial Operacional',
                content: `
                    <div class="space-y-4">
                        <p class="text-terminal-accent font-bold">TUTORIAL OFICIAL MOTHERSHIP RPG</p>
                        <div class="border border-dark-border p-4">
                            <p class="text-terminal-color mb-2"><strong>Presentado por:</strong> Dr. Andreas M√ºller, Director de Entrenamiento</p>
                            <p class="text-terminal-color mb-4"><strong>Duraci√≥n:</strong> 23:47 | <strong>Calidad:</strong> HD 1080p</p>
                            
                            <p class="text-terminal-color mb-2"><strong>Contenidos del Tutorial:</strong></p>
                            <ul class="list-disc list-inside space-y-1 text-sm text-terminal-color">
                                <li>00:00 - Introducci√≥n al universo Mothership</li>
                                <li>02:15 - Creaci√≥n de personajes paso a paso</li>
                                <li>07:30 - Mec√°nicas b√°sicas y tiradas</li>
                                <li>12:45 - Sistema de Estr√©s y P√°nico</li>
                                <li>18:20 - Combate y supervivencia</li>
                                <li>21:10 - Consejos para Game Masters</li>
                            </ul>
                        </div>
                        <div class="p-3 bg-black border border-error-color">
                            <p class="text-error-color text-xs">
                                ‚ö†Ô∏è Contenido puede incluir referencias a violencia, horror c√≥smico y situaciones de estr√©s extremo.
                            </p>
                        </div>
                    </div>
                `,
                action: 'REPRODUCIR VIDEO'
            }
        };

        function openResourceModal(resourceType) {
            const data = RESOURCE_DATA[resourceType];
            if (!data) return;

            RESOURCE_MODAL_TITLE.textContent = data.title;
            RESOURCE_MODAL_CONTENT.innerHTML = data.content;
            DOWNLOAD_RESOURCE_BTN.textContent = data.action;
            DOWNLOAD_RESOURCE_BTN.onclick = () => {
                playTerminalSound('success');
                showNotification(`Accediendo a: ${data.title}`, 'success');
                // Aqu√≠ ir√≠an los enlaces reales
            };

            RESOURCE_MODAL.classList.remove('hidden');
        }

        CLOSE_RESOURCE_MODAL.addEventListener('click', () => {
            RESOURCE_MODAL.classList.add('hidden');
        });

        // Hacer funciones globalmente accesibles para onclick
        window.playMissionAudio = playMissionAudio;
        window.stopAllMissionAudio = stopAllMissionAudio;

        // 14. Inicializar la aplicaci√≥n al cargar la ventana
        window.onload = () => {
            // Sistema simplificado sin localStorage
            
            showScreen('landing');
            updateTimestamp();
            
            // Renderizar contenido cargado
            renderAllMissions();
            
            // Inicializar la primera pesta√±a de inventario
            setTimeout(() => {
                showInventoryTab('weapons');
            }, 500);
            
            // Mostrar informaci√≥n de datos cargados si existen
            setTimeout(() => {
                showStorageStatus();
            }, 2000);
            
            // Agregar efectos de parpadeo aleatorio
            setInterval(() => {
                const flickerElements = document.querySelectorAll('.flicker');
                const randomElement = flickerElements[Math.floor(Math.random() * flickerElements.length)];
                if (randomElement) {
                    randomElement.style.opacity = '0.7';
                    setTimeout(() => {
                        randomElement.style.opacity = '1';
                    }, 100);
                }
            }, 3000);
        };
    </script>
</body>
</html>
